{"version":3,"sources":["data/sfx.yaml","data/sfx-sq.yaml","data/casts sync /^/.//.*$","data/casts/Core_Gadgets.yaml","data/casts/Core_Heroic_Extras.yaml","data/casts/Core_Heroic_Star_Co-Star.yaml","data/casts/Core_Neutral_Extras.yaml","data/casts/Core_Vehicles.yaml","data/casts/Core_Villainous_Extras.yaml","data/casts/Core_Villainous_Star_Co-Star.yaml","data sync /^/.//.*/-uischema/.json$","reducers/index.js","lib/helpers.js","components/Ui.js","components/Card.js","components/FormWidgets.js","components/CharacterWidgets.js","components/CharacterEditor.js","components/App.js","index.js","data sync /^/.//.*/-schema/.json$","data/mods.yaml","lib/simple-locale.js","data sync /^/.//.*/-blank/.json$","HELP.md"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","randomName","Ajv","Math","round","random","first","middle","last","loadYamlFile","file","asSingleFile","Promise","accept","reject","reader","FileReader","onload","data","Yaml","safeLoad","result","objs","safeLoadAll","obj","push","console","error","readAsText","saveYamlFile","docs","options","skipInvalid","Array","isArray","doc","safeDump","cleanDeep","emptyArrays","emptyObjects","emptyStrings","nullValues","join","INITIALSTATE","currentCharacter","cast","getTemplateCharacterNew","payload","templatename","__card","require","toLowerCase","reducer","state","action","assign","TEMPLATE_CHARACTER_NEW","type","actionTypes","INIT","validateState","uid","uuid","v4","name","__version","version","slice","filter","item","value","char","key","sendAsFile","filename","mimetype","blob","Blob","tempLink","document","createElement","href","window","URL","createObjectURL","setAttribute","style","display","body","appendChild","click","remove","parseDataUri","groups","exec","mime","length","forEach","split","dataURI","byteString","atob","mimeString","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","dataURItoBlob","sendAsImage","domId","opts","el","getElementById","logging","scale","letterRendering","allowTaint","useCORS","log","nodes","selector","querySelectorAll","node","index","getAsImage","then","dataUrl","link","download","replace","catch","warn","html2canvas","canvas","toDataURL","FileField","props","_domclick","ce","preventDefault","modifiers","ctrl","ctrlKey","shift","shiftKey","meta","metaKey","this","input","__changeHandler","removeEventListener","onChange","addEventListener","bind","clicker","ref","children","multiple","React","Component","dottedLine","xFrom","yFrom","xTo","yTo","segmentLength","a","abs","b","c","sqrt","pow","fractions","adjustedSegmentLength","floor","ceil","deltaX","deltaY","curX","curY","line","chunk","r","j","fn","reduce","g","cardGrid","cardFactor","fw","fh","from","v","x","y","cardCuts","setLineWidth","setDrawColor","MARGIN_Y","MARGIN_X","Marked","md","Options","rest","__html","marked","inline","dangerouslySetInnerHTML","Toolbar","args","status","setState","forceUpdate","className","textAlign","marginBottom","marginTop","margin","bsStyle","bsSize","title","eventKey","onClick","dispatch","files","target","characterLoader","Queue","Infinity","add","loadCharacter","block","glyph","characters","slug","fileName","jsPDF","orientation","format","unit","promises","sort","sortBy","rs","rj","img","dataURL","all","items","p","cn","positions","itemsperpage","page","addPage","addImage","save","downloadCharactersAsPDF","confirm","connect","Help","open","in","Rescue","dropup","Date","JSON","stringify","StatBlock","stats","zero","entries","entry","Pic","photo","backgroundImage","alt","src","tint","Weapons","colspan","effects","rowSpan","colSpan","undefined","isString","attack","range","strike","ModsTable","mods","fetch","response","text","txt","list","character","ratings","location","classify","stat","mod","indent","mounted","Ratings","Trait","object","full","cost","level","description","stars","fill","Description","Title","alignment","_type","Tags","values","additional","CheckRibbon","slots","Number","CardFront","card","theme","__theme","renderVehicle","renderVehicleLarge","renderUnit","renderGadget","renderModel","health","weapons","__custom","__tint","__genres","genres","tags","sfx","special_effects","capacity","armour","defence","s","move","vehicle","hood","engine","trunk","chassis","parked","slow","fast","reverse","fight","shoot","mind","spirit","role","qlty","star_quality","T","notes","CardBack","models","m","qty","model","play","weapon","zip","String","Card","cardsize","stopPropagation","position","right","textToolsWidgets","ToolInsertText","widget","insert","txtarea","scrollPos","scrollTop","strPos","br","selectionStart","selection","focus","createRange","moveStart","front","substring","back","ieRange","moveEnd","select","selectionEnd","insertAtCaret","ToolTextareaWidget","textTools","cmp","Fcmp","parseTextTools","PictureWidget","errorSchema","crop","aspect","uploadHandler","cropHandler","updateHandler","removeHandler","str","p1","encodeURIComponent","pixelCrop","width","height","ctx","getContext","image","Image","drawImage","getCroppedImg","fileprops","disabled","decodeURIComponent","ToolArrayField","cloneElement","CollapseObjectField","uiSchema","formData","ObjectSelectField","schema","enum","parse","idSchema","$id","option","formContext","parseTrait","label","trait","TraitSelect","handleClick","placeholder","validate","componentClass","defaultValue","groupFilter","group","traitFilter","sfx_entry","Button","SFXSelect","SQSelect","ModSelect","dotProp","get","search","RegExp","PROFILES","k","readContext","ProfileSelector","casting","selected","path","chr","header","fromTemplate","profile","MiniCard","SfxArrayField","SQArrayField","ModArrayField","CharacterEditor","handleChange","characterId","find","widgets","toolTextareaWidget","pictureWidget","fields","collapseObjectField","sfxArrayField","sqArrayField","modArrayField","objectSelectField","onSubmit","onError","liveValidate","ChromeNag","isChrome","App","minSize","defaultSize","parseInt","localStorage","getItem","size","setItem","updateCharacter","deselectCharacter","LOCALSTORAGE_KEY","locale","Locale","gb_EN","load","set","params","arr","storeReducer","compose","mergePersistedState","storage","adapter","enhancer","applyMiddleware","logger","persistState","store","createStore","ReactDOM","render","simpleLocale","locales","hasOwnProperty","currentLocale","localeString","prototype","hasLocale","loc","countryCode","lObj","newLocale","bindStr","pos","splittedKey","word"],"mappings":"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","file":"static/js/main.dcf7b8d7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sfx.6a2dd9ee.yaml\";","module.exports = __webpack_public_path__ + \"static/media/sfx-sq.d637adaa.yaml\";","var map = {\n\t\"./Core_Gadgets.yaml\": 1123,\n\t\"./Core_Heroic_Extras.yaml\": 1124,\n\t\"./Core_Heroic_Star_Co-Star.yaml\": 1125,\n\t\"./Core_Neutral_Extras.yaml\": 1126,\n\t\"./Core_Vehicles.yaml\": 1127,\n\t\"./Core_Villainous_Extras.yaml\": 1128,\n\t\"./Core_Villainous_Star_Co-Star.yaml\": 1129\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1122;","module.exports = __webpack_public_path__ + \"static/media/Core_Gadgets.4cbc0194.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Heroic_Extras.dd847c38.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Heroic_Star_Co-Star.d4498053.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Neutral_Extras.5a9919fa.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Vehicles.14625b48.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Villainous_Extras.8330d9bc.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Villainous_Star_Co-Star.f9620acb.yaml\";","var map = {\n\t\"./gadget_small-uischema.json\": 1131,\n\t\"./model-uischema.json\": 1132,\n\t\"./unit-uischema.json\": 1133,\n\t\"./vehicle-uischema.json\": 1134,\n\t\"./vehicle_large-uischema.json\": 1135\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1130;","import {version} from '../../package.json';\nimport uuid from 'uuid';\nimport Yaml from 'js-yaml';\nimport cleanDeep from 'clean-deep';\nimport { first, middle, last} from 'random-name'\nimport {actionTypes} from 'redux-localstorage'\nimport Ajv from 'ajv';\nconst ajv = new Ajv();\n\nconst randomName=()=>{\n    return (Math.round(Math.random())?first():middle())+\" \"+last();\n}\n\nexport const loadYamlFile = (file,asSingleFile=false) => {\n    return () => {\n        return new Promise((accept, reject) => {\n            let reader = new FileReader();\n            reader.onload = (data) => {\n                try {\n                    if (asSingleFile){\n                        accept(Yaml.safeLoad(reader.result))\n                    } else {\n                        let objs = [];\n                        Yaml.safeLoadAll(reader.result, (obj) => { objs.push(obj) });\n                        accept(objs)\n                    }\n                } catch (e) {\n                    console.error(e)\n                    reject(e)\n                }\n            }\n            reader.readAsText(file);\n        })\n    }\n}\n\nexport const saveYamlFile=(docs,asSingleFile=false, options={skipInvalid:true})=>{\n    if (asSingleFile && Array.isArray(docs)){\n        return docs.map((doc)=>{\n            try {\n                return Yaml.safeDump(cleanDeep(doc,{emptyArrays:false, emptyObjects:false, emptyStrings:false, nullValues:false}), options)\n            } catch(e) {\n                console.error(doc)\n            }\n            return null;\n        }).join(\"\\n---\\n\")\n        \n    } else {\n        return Yaml.safeDump(docs, options);\n    }\n}\n\nconst INITIALSTATE = {\n    currentCharacter:null,\n    cast: []\n}\n\nconst getTemplateCharacterNew=(payload, templatename='model')=>{\n    if (payload && payload.__card)\n        templatename=payload.__card;\n    return require('../data/'+templatename.toLowerCase()+'-blank.json')\n}\n\nconst reducer = (state = INITIALSTATE, action) => {\n    state = Object.assign({}, state)\n    const TEMPLATE_CHARACTER_NEW = getTemplateCharacterNew(action.payload)\n    switch (action.type) {\n        case actionTypes.INIT:\n            return validateState(state);\n            break;\n        case \"CHARACTER_NEW\":\n            let uid=uuid.v4();\n            state.cast = [...state.cast, Object.assign({},TEMPLATE_CHARACTER_NEW, { id: uid, name: randomName(), __version: version }, action.payload || {})];\n            state.currentCharacter=uid\n            break;\n        case \"CHARACTER_LOAD\":\n            state.cast = [...state.cast, Object.assign({},TEMPLATE_CHARACTER_NEW,action.payload, { id: uuid.v4() })];\n            break;\n        case \"CHARACTER_REMOVE\":\n            state.cast = state.cast.slice().filter((item) => { return item.id !== action.payload.id; })\n            break;\n        case \"CHARACTER_SELECT\":\n            state.currentCharacter=action.payload.id;\n            break;\n        case \"CHARACTER_UPDATE\":\n            state.cast = state.cast.slice().map((item)=>{\n                if (item.id!==action.payload.id)\n                    return item;\n                return action.payload;\n            })\n            break;\n        case \"CHARACTER_APPEND_TRAIT\":\n            if (!action.payload.value) return;\n            state.cast = state.cast.slice().map((item)=>{\n                if (item.id!==action.payload.id)\n                    return item;\n                let char=Object.assign({},item)\n                    char[action.payload.key].push(action.payload.value)\n\n                return char;\n            })\n            break;\n           \n        case \"CAST_CLEAR\":\n            state.cast=[]\n        break;\n        default:\n            return state;\n    }\n    return state;\n}\n\nexport default reducer;\n\n\nconst validateState=(state)=>{\n    return state;\n    state.cast= state.cast.slice().map((item)=>{\n        const schema = require('../data/'+item.__card.toLowerCase()+'-schema.json');\n        let validate = ajv.compile(schema);\n        if (validate(item)){\n            return item\n        } else {\n            alert(validate.errors)\n            return item;\n            \n        };\n    })\n    return state;\n}","import html2canvas from 'html2canvas';\n\nexport function sendAsFile(filename, data, mimetype) {\n\n    let blob = new Blob([data], {type: mimetype});\n\n    let tempLink = document.createElement('a');\n    tempLink.href = window.URL.createObjectURL(blob);\n    tempLink.setAttribute('download', filename);\n    tempLink.style.display = 'none'\n    document.body.appendChild(tempLink);\n    tempLink.click();\n    tempLink.remove();\n}\n\nexport function parseDataUri(data) {\n    if (!data)\n        return {};\n    let rex = /data:([^;]+);(?:([^;]+)?;)+(base64,.*$)/gi\n    let result = {}\n    let groups = rex.exec(data);\n    if (groups) {\n        result.mime = groups[1]\n    }\n    if (groups.length > 2) {\n        groups.slice(2, groups.length - 1).forEach((item) => {\n            let [key, value] = item.split(\"=\")\n            result[key] = value\n        })\n    }\n\n    result.data = dataURItoBlob(data);\n\n    return result;\n}\n\nexport function dataURItoBlob(dataURI) {\n    // convert base64 to raw binary data held in a string\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n    var byteString = atob(dataURI.split(',')[1]);\n\n    // separate out the mime component\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\n\n    // write the bytes of the string to an ArrayBuffer\n    var ab = new ArrayBuffer(byteString.length);\n\n    // create a view into the buffer\n    var ia = new Uint8Array(ab);\n\n    // set the bytes of the buffer to the correct values\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n\n    // write the ArrayBuffer to a blob, and you're done\n    var blob = new Blob([ab], {type: mimeString});\n    return blob;\n\n}\n\nexport function sendAsImage(domId, filename, opts = {}) {\n    let el = document.getElementById(domId)\n    opts = Object.assign(opts,{logging: true,\n        scale:2,\n        letterRendering: 1,\n        allowTaint: true,\n        useCORS: true})\n\n    console.log(opts);\n    //opts.foreignObjectRendering = true;\n    let nodes = (opts.selector) ? el.querySelectorAll(opts.selector) : [el];\n\n\n    nodes.forEach(function (node, index) {\n        index = (nodes.length > 1) ? index : ''\n        getAsImage(node, opts)\n            .then(function (dataUrl) {\n                var link = document.createElement('a');\n                link.download = filename.replace('{n}', index) || (\"7tv_cast-\" + domId + \".png\");\n                link.style = 'display:none'\n                link.href = dataUrl;\n                document.body.appendChild(link)\n                link.click();\n                link.remove();\n\n            }).catch(console.warn);\n    })\n}\n\nexport function getAsImage(node, opts = {}) {\n    return new Promise((resolve) => {\n        html2canvas(node, opts).then(function (canvas) {\n            resolve(canvas.toDataURL(\"image/png\"));\n        })\n    });\n}\n\nexport function insertAtCaret(txtarea, text) {\n\n    if (!txtarea) {\n        return;\n    }\n\n    var scrollPos = txtarea.scrollTop;\n    var strPos = 0;\n    var br = ((txtarea.selectionStart || txtarea.selectionStart === '0') ?\n        \"ff\" : (document.selection ? \"ie\" : false));\n    if (br === \"ie\") {\n        txtarea.focus();\n        var range = document.selection.createRange();\n        range.moveStart('character', -txtarea.value.length);\n        strPos = range.text.length;\n    } else if (br === \"ff\") {\n        strPos = txtarea.selectionStart;\n    }\n\n    var front = (txtarea.value).substring(0, strPos);\n    var back = (txtarea.value).substring(strPos, txtarea.value.length);\n    txtarea.value = front + text + back;\n    strPos += text.length;\n    if (br === \"ie\") {\n        txtarea.focus();\n        var ieRange = document.selection.createRange();\n        ieRange.moveStart('character', -txtarea.value.length);\n        ieRange.moveStart('character', strPos);\n        ieRange.moveEnd('character', 0);\n        ieRange.select();\n    } else if (br === \"ff\") {\n        txtarea.selectionStart = strPos;\n        txtarea.selectionEnd = strPos;\n        txtarea.focus();\n    }\n\n    txtarea.scrollTop = scrollPos;\n}\n\nexport const readContext = (ctx) => {\n    let keys = ctx.keys();\n    let values = keys.map(ctx);\n    return keys.reduce((obj, k, i) => ({...obj, [k]: values[i]}), {})\n}","/* eslint-disable */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport Queue from 'promise-queue';\nimport ReactDOM from 'react-dom';\nimport { marked } from 'marked';\nimport { loadYamlFile, saveYamlFile } from '../reducers/index';\nimport { SplitButton, MenuItem, Button, ButtonToolbar, Glyphicon, DropdownButton, Collapse} from 'react-bootstrap';\nimport { sendAsFile, sendAsImage, getAsImage } from '../lib/helpers'\nimport slug from 'slug';\nimport jsPDF from 'jspdf';\nimport '../assets/fonts/din-cond/style.css';\n\nimport { resolve } from 'path';\nimport sortBy from 'sort-by'\nimport { range } from 'rxjs';\n\nconst PAGE_WIDTH=10.55;\nconst PAGE_HEIGHT=7.55;\nconst MARGIN_X=0.3;\nconst MARGIN_Y=0.3;\nconst CARD_WIDTH=5;\nconst CARD_HEIGHT=3.5;\nconst CARD_OFFSETX=0;\nconst CARD_OFFSETY=-0.03\n\nexport class FileField extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this._domclick = function (ce) {\n            ce.preventDefault();\n            let modifiers = { ctrl: ce.ctrlKey, shift: ce.shiftKey, meta: ce.metaKey };\n            if (this.input.__changeHandler) this.input.removeEventListener('change', this.input.__changeHandler)\n            this.input.value = \"\";\n            this.input.__changeHandler = (e) => {\n                e.preventDefault();\n                this.props.onChange(e, modifiers)\n            }\n            this.input.addEventListener('change', this.input.__changeHandler)\n            this.input.click();\n        }.bind(this)\n    }\n\n    componentDidMount() {\n        this.clicker.addEventListener('click', this._domclick)\n    }\n\n    componentWillUnMount() {\n        this.clicker.removeEventListener('click', this._domclick)\n    }\n\n    render() {\n        return <span style={this.props.style} >\n            <span ref={(input) => this.clicker = input}>{this.props.children}</span><input type=\"file\" ref={(input) => { this.input = input }} multiple style={{ display: \"none\" }} accept={this.props.accept} />\n        </span>\n    }\n}\n\nexport const loadCharacter = (e, action) => {\n    let self = this\n    let files = e.target.files;\n    if (!window.characterLoader)\n        window.characterLoader = new Queue(1, Infinity)\n\n    for (let file of files) {\n        window.characterLoader.add(loadYamlFile(file)).then((data) => {\n            data.forEach((obj, i) => {\n                action(obj, i)\n            }, this);\n\n        }).catch(console.error)\n    }\n}\n\nexport const downloadCharacters=(characters)=>{\n    sendAsFile(\"7TV_cast.yaml\",saveYamlFile(characters,true),'application/x-yaml')\n}\n\nexport const downloadSingleCharacter=(character)=>{\n    sendAsFile(\"7TV_cast-\"+slug(character.name||character.id)+\".yaml\",saveYamlFile(character,false),'application/x-yaml');\n}\n\nexport const downloadCharactersAsImages=(cast)=>{\n    cast.forEach(item=>{\n        sendAsImage(item.id,\"7TV_cast-\"+slug(item.name||item.id)+\".png\");\n    })\n}\n\nconst dottedLine=function(doc, xFrom, yFrom, xTo, yTo, segmentLength)\n{\n    // Calculate line length (c)\n    var a = Math.abs(xTo - xFrom);\n    var b = Math.abs(yTo - yFrom);\n    var c = Math.sqrt(Math.pow(a,2) + Math.pow(b,2));\n\n    // Make sure we have an odd number of line segments (drawn or blank)\n    // to fit it nicely\n    var fractions = c / segmentLength;\n    var adjustedSegmentLength = (Math.floor(fractions) % 2 === 0) ? (c / Math.ceil(fractions)) : (c / Math.floor(fractions));\n\n    // Calculate x, y deltas per segment\n    var deltaX = adjustedSegmentLength * (a / c);\n    var deltaY = adjustedSegmentLength * (b / c);\n\n    var curX = xFrom, curY = yFrom;\n    while (curX <= xTo && curY <= yTo)\n    {\n        doc.line(curX, curY, curX + deltaX, curY + deltaY);\n        curX += 2*deltaX;\n        curY += 2*deltaY;\n    }\n}\n\nconst getImageDimensions= (file) => {\n    return new Promise (function (resolved, rejected) {\n      var i = new Image()\n      i.onload = function(){\n        resolved({w: i.width, h: i.height})\n      };\n      i.src = file\n    })\n  }\n\nexport const downloadCharactersAsPDF=(cast,fileName='7TVcast',status=console.warn)=>{\n\n    \n\n    let doc = new jsPDF({orientation: 'landscape',format:[PAGE_WIDTH,PAGE_HEIGHT],unit:'in'});\n        \n        \n\n    var i=0;\n    let promises=cast.sort(sortBy('__card')).map((item)=>{\n        return new Promise((rs,rj)=>{\n            getAsImage(document.getElementById(item.id)).then((img)=>{\n                status(\"Processing image \"+(++i)+\"/\"+cast.length);\n                rs({dataURL: img,type:item.__card.replace(/.*_(.*)$/,'$1')})\n            }).catch(console.log);\n    })});\n    \n    \n\n    Promise.all(promises).then((items)=>{\n        chunk(items,0,(i,p)=>{return i.type!==p.type;}).forEach((c,cn)=>{ \n            let positions = cardGrid(c[0].type);\n            chunk(c,positions.length).forEach((itemsperpage,page)=>{\n                \n                status(\"Generating page \"+(page+1))\n                if (cn||page) doc.addPage();\n                itemsperpage.forEach((item,j)=>{\n                    let {dataURL,type} = item;\n                    let [fw,fh] = cardFactor(type);\n                    doc.addImage(dataURL,'JPEG',positions[j].x,positions[j].y,CARD_WIDTH*fw,CARD_HEIGHT*fh)\n                })\n                cardCuts(c[0].type,doc)\n            });\n\n\n        });\n        doc.save(fileName+'.pdf')\n        status(null)\n       \n    })\n\n}\n\nconst chunk = (r,j,fn=(i)=>{return false;}) => r.reduce((a,b,i,g) => {\n    if (!i || j&&(!(a[a.length-1].length % j)) ||  (fn(b,g[!i?i:i-1]))) a.push([])\n        a[a.length-1].push(g[i])\n    return a;\n}, []);\n\n\nconst cardGrid=function(type){\n\n    let [fw,fh] = cardFactor(type);\n\n    switch(type){\n        case 'small': \n            return Array.from(Array(8).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n        case 'large': \n            return Array.from(Array(2).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n        default: \n            return Array.from(Array(4).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n    }\n}\n\nconst cardCuts=function(type,doc){\n    doc.setLineWidth(0.01)\n    doc.setDrawColor(255,255,255);\n    switch(type){\n        case 'large':\n            dottedLine(doc,0,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,PAGE_WIDTH,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,0.01)\n        break;\n        default:\n            dottedLine(doc,MARGIN_X+CARD_WIDTH/2,0,MARGIN_X+CARD_WIDTH/2,PAGE_HEIGHT,0.05)\n            dottedLine(doc,MARGIN_X+CARD_WIDTH,0,MARGIN_X+CARD_WIDTH,PAGE_HEIGHT,0.01)\n            dottedLine(doc,MARGIN_X+CARD_WIDTH/2*3,0,MARGIN_X+CARD_WIDTH/2*3,PAGE_HEIGHT,0.05)\n            dottedLine(doc,0,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,PAGE_WIDTH,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,0.01)\n        break;\n    }\n}\n\nconst cardFactor=function(type){\n    switch(type){\n        case 'small': return [1,0.5]; break;\n        case 'large': return [1,2]; break;\n        default: return [1,1];\n    }\n}\n\n\nexport const Marked = ({md=\"\", Component=\"span\", Options={},...rest})=>{\n    let __html=marked(md,Options);\n        if (Options.inline) __html=__html.replace(/^<p>/gi,'').replace(/<\\/p>[\\r\\n]*$/gi,'').replace(/[\\r\\n]/gi,'')\n    return <Component {...{...rest}} dangerouslySetInnerHTML={{__html}}/>\n}\n\n\nexport class Toolbar extends React.Component {\n    constructor(...args) {\n        super(...args);\n        this.state = {\n          status: null,\n        };\n    }\n\n    status(status){\n        this.setState({status: status? \"(\"+status+\")\":''}); \n        this.forceUpdate();\n    }\n\n    render(){\n\n        return <div className=\"ui paper editorToolBar\">\n                <h2 className=\"din\" style={{textAlign:\"center\", marginBottom:0}}>7TV Studios</h2>\n                <h5 className=\"din\" style={{textAlign:\"center\", marginTop:0}}> casting agency</h5>\n               <div style={{margin:5}}>\n               <DropdownButton bsStyle=\"primary\" bsSize=\"small\" title=\"New\"  id=\"new_model\" >\n                <MenuItem eventKey=\"1\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW' })}>Character</MenuItem>\n                <MenuItem eventKey=\"2\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'vehicle'} })}>Vehicle</MenuItem>\n                <MenuItem eventKey=\"3\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'vehicle_large'} })}>Extended Vehicle</MenuItem>\n                <MenuItem eventKey=\"4\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'unit'} })}>Unit</MenuItem>\n                <hr/>\n                <MenuItem eventKey=\"5\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'gadget_small'} })}>Gadget</MenuItem>\n               </DropdownButton>\n              \n                \n                <FileField style={{display:\"block\",margin: \"5px 0 5px 0\"}} accept=\".yaml\" onChange={e => loadCharacter(e, (file) => this.props.dispatch({ type: 'CHARACTER_LOAD', payload: file }))}><Button block  bsSize=\"small\" bsStyle=\"success\"><Glyphicon glyph=\"upload\" /> Load .Yaml</Button></FileField>\n                \n                <Button block bsSize=\"small\" onClick={e=>downloadCharacters(this.props.cast)} bsStyle=\"warning\"><Glyphicon glyph=\"download\" /> Download as .Yaml</Button>\n                <Button block bsSize=\"small\" onClick={e=>downloadCharactersAsImages(this.props.cast)} bsStyle=\"danger\"><Glyphicon glyph=\"download\" /> Download as Single Images</Button>\n                <Button block bsSize=\"small\" onClick={e=>downloadCharactersAsPDF(this.props.cast, null,this.status.bind(this))} bsStyle=\"danger\"><Glyphicon glyph=\"download\" /> Download as PDF {this.state.status}</Button>\n                <Button block bsSize=\"small\" onClick={e=> {if (confirm('Are you sure? This will wipe all the current cards! It is a bloody nuke!')) this.props.dispatch({type: 'CAST_CLEAR'});}} bsStyle=\"info\"><Glyphicon glyph=\"trash\" /> Reset all</Button>\n               </div>\n            \n        </div>\n    }\n}\n\nToolbar = connect(\n    (state)=>{return {cast: state.cast}}\n)(Toolbar);\n\n\nexport class Help extends React.Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n          open: false,\n        };\n    }\n\n    render(){\n        return <div className=\"ui paper\" style={{margin:5}} >\n\n       \n        <Button block bsSize=\"small\" onClick={() => this.setState({ open: !this.state.open })} bsStyle=\"default\">Help</Button>\n        <Collapse in={this.state.open}><div className=\"help\" dangerouslySetInnerHTML={{__html:marked(require(\"!raw-loader!../HELP.md\"))}} ></div></Collapse>\n\n\n      </div>\n    }\n}\n\nconst downloadSnapshot=function(state)\n{\n    let d=new Date();\n    sendAsFile(\"7TV-debug-\"+d+\".json\",JSON.stringify(state),'application/json');\n}\n\n\nexport class Rescue extends React.Component {\n    render(){\n        return <div className=\"ui paper\"> <DropdownButton bsStyle=\"primary\" bsSize=\"xsmall\" title=\"Debug\"  id=\"new_model\" dropup >\n            <MenuItem eventKey=\"1\" onClick={e=>downloadSnapshot(this.props.state)}>Download data snapshot</MenuItem>\n       </DropdownButton></div>\n    }\n}\n\nRescue = connect((state)=>({state}))(Rescue);","/* eslint-disable */\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { connect } from 'react-redux'\nimport { DropdownButton, MenuItem} from 'react-bootstrap';\nimport slug from 'slug';\nimport '../assets/fonts/din-cond/style.css';\nimport '../assets/fonts/veneer3/style.css';\nimport '../assets/card.scss'\nimport { sendAsFile, sendAsImage } from '../lib/helpers'\nimport Yaml from \"js-yaml\"\n\nimport {T,zip} from '../index'\n\n\n\nimport { downloadSingleCharacter, Marked } from './Ui'\nimport { isString } from 'util';\n\n\n\nconst stats = { fight: 10, shoot: 10, defence: 10, mind: 10, body: 10, spirit: 10 };\n\n\n\nconst StatBlock = ({ stats, className=\"\", zero='0', ...rest }) => {\n    return <div className={\"stats \" + className}>\n        {Object.entries(stats).map((entry, i) => {\n            let [key, value] = entry;\n            return <div key={i} className={key}><div>{key}</div><div><var>{(value)?value:zero}</var></div></div>\n        })}\n    </div>\n}\n\nconst Pic = ({ photo, className, ...rest }) => {\n    let style=photo? {backgroundImage: \"url(\"+photo+\")\"}:{};\n    return <div className={['pic',className].join(\" \")} style={style}><img alt=\"\" src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E\" style={{filter:`hue-rotate(${rest.tint}deg)`}}/></div>\n}\n\n\n\nconst Weapons = ({ items }) => {\n\n    let colspan=items.length? Object.keys(items[0].effects).length : 1\n\n    return <table className=\"weapons\">\n        <thead><tr><td rowSpan=\"2\" className=\"attack\">Attack</td><td  className=\"range\" rowSpan=\"2\">Range</td><td rowSpan=\"2\" className=\"strike\">Strike</td><td className=\"effects\" colSpan={colspan}>Effects</td></tr>\n                { (items.length && typeof items[0].effects =='object') ? (<tr>{ Object.keys(items[0].effects).map((key,i)=>{ return <td key={i} className={key}>{key}</td>})}</tr>) : undefined }\n            </thead>\n        <tbody>\n            {items.map((item, i) => {\n                let effects=isString(item.effects)? {effects: item.effects} : item.effects;\n                return <tr className={slug(item.type||\"\").toLowerCase()} key={i}>\n                    <td className=\"attack\" dangerouslySetInnerHTML={item.attack.length? {__html:item.attack}:{__html:\"&nbsp;\"}}></td><td className=\"range\">{item.range}</td><td className=\"strike\">+{item.strike}</td>\n                    { Object.entries(effects).map((entry,i)=>{\n                        let [key,value] = entry;\n                        return <Marked key={i} Component='td' className={key} md={value} Options={{inline:true}}/>\n\n                    }) }\n                    \n                </tr>\n            })}\n        </tbody>\n    </table>\n}\n\nclass ModsTable extends React.Component {\n    \n    constructor(props){\n        super(props);\n        this.state={mods:{}}\n    }\n    componentDidMount()\n    {\n        fetch(require('../data/mods.yaml')).then((response)=>{\n            response.text().then(function(txt){\n                this.setState({mods: Yaml.safeLoad(txt)||{}});\n            }.bind(this))\n        })\n    }\n\n    classify(){\n        let list = {}\n\n        if (typeof this.props.character.type=='object' ){\n            let [name,ratings] =  Object.entries(this.props.character.type)[0]\n            list['vehicle']=[{ratings, name}];\n        }\n        this.props.character.mods.forEach((item)=>{\n            if (list[item.location]==undefined)\n                list[item.location]=[];\n            list[item.location].push(item);\n        })\n        return list\n    }\n\n    render(){\n        return <div className=\"mods\">{Object.entries(this.classify()).map((entry,i)=>{\n            return <table key={i}><thead><tr><th>{entry[0]}<CheckRibbon className={entry[0].toLowerCase()}   stat={this.props.character.stats[entry[0].toLowerCase()]}/></th><td>Ratings</td></tr></thead><tbody>\n            {entry[1].map((mod,j)=>{\n                let indent=(/^([ ]+)/gi.exec(mod.name))\n                return <tr key={j} className={mod.mounted?\"mounted\":\"\"}><td className={[\"name\",indent?\"indent\":\"\"].join(\" \")}>{mod.name.replace(/^[ ]*/gi,'')}</td><td className=\"ratings\">{mod.ratings}</td></tr>\n            })}\n            </tbody></table>\n        })}</div>\n    }\n}\n\n\n\nconst Ratings = ({ value }) => {\n    return <div className=\"ratings\"><val>{value}</val> <span> RATINGS</span></div>\n}\n\n\nconst Trait = ({ object, full }) => {\n    let { cost, name, level, description } = object\n    let stars = cost ? Array(cost).fill(\"\").map((v, i) => { return <i key={i} className=\"icon-star_icon\"></i> }) : undefined\n    if (full) {\n        return <p><strong><Marked md={name} Options={{inline:true}}/>{level ? ` (${level})` : ''}{stars ? \" \" : \"\"}{stars}</strong><br /><Marked md={description}/></p>\n        \n    }\n    return <span>{name}{level ? ` (${level})` : ''}{stars ? \" \" : \"\"}{stars}</span>\n}\n\nconst Description = ({text}) =>{\n    return <p className=\"description\"><Marked md={text}/></p>\n}\n\nconst Title = ({ name=\"\", alignment=\"\", type=\"\" }) => {\n    let _type = typeof type == 'object'? Object.keys(type)[0] : type;\n    return <div className=\"title\"><strong>{name}</strong> <i className={_type.toLowerCase()} /> <span>{alignment} {_type}</span></div>\n}\n\nconst Tags = ({ values, additional=[] }) => {\n    return <div className=\"tags\">{values.map((v, i) => { \n        return <i key={i} className={\"icon-\" + slug(v||\"\").toLowerCase()}></i> \n    })}{(additional||[]).map((v,i)=>{\n        return <img key={i+values.length} src={v} /> \n    })}</div>\n}\n\nconst CheckRibbon = ({stat, className})=>{\n    let slots = Array(Number(stat||0)).fill(\"\").map((v, i) => { return <div key={i}></div> })\n    return <div className={[\"checkribbon\",className].join(' ')}>{slots}</div>\n}\n\nexport class CardFront extends React.Component {\n    render() {\n        const card = (this.props.character.__card||\"Model\").toLowerCase()\n        const theme = (this.props.character.__theme||\"core\").toLowerCase()\n        switch(card) {\n            case \"vehicle\":\n                return this.renderVehicle(card,theme)\n            break;\n            case \"vehicle_large\":\n                return this.renderVehicleLarge(card,theme)\n            break;\n            case \"unit\":\n                return this.renderUnit(card,theme)\n            break;\n            case \"gadget_small\":\n                return this.renderGadget(card)\n            break;\n            default:\n                return this.renderModel(card,theme)\n            break;\n        }\n    }\n\n    renderVehicle(card,theme)\n    {\n        let { health=0, ratings=0,name, type, photo, description=\"\",weapons=[], __custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let __genres= __custom ? __custom.genres: null\n        let tags = this.props.character.genres||[]\n        let sfx = this.props.character.special_effects || [];\n        let { capacity=0, armour=0, defence=0 } = this.props.character.stats;\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\"].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name} type={type} />\n            <Pic photo={photo} tint={__tint}/>\n            <StatBlock stats={{ capacity, armour, defence }} />\n            {weapons.length? <Weapons items={weapons} />:<Description text={description}/>}\n            <div className=\"sfxribbon\">\n                <dl><dt>Special effects</dt><dd>{sfx.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n            </div>\n            <Ratings value={ratings} />\n            <CheckRibbon stat={health} className=\"health\" />\n            <Tags values={tags} additional={__genres} />\n        </div>\n        </div></div>\n    }\n\n    renderVehicleLarge(card,theme)\n    {\n        let { health=0,  name,   photo, description=\"\",weapons=[], __custom,ratings, type } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let __genres= __custom ? __custom.genres: null\n        let tags = this.props.character.genres||[]\n        let sfx = this.props.character.special_effects || [];\n        let { move=0, defence=0, armour=0, capacity=0, hood=0, body=0, engine=0, trunk=0, chassis=0 } = this.props.character.stats;\n        let vehicle=Object.keys(type)[0].toLowerCase();\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name}/>\n            <Pic className={vehicle} photo={photo}/>\n            <div className=\"contentblock\">\n            <StatBlock stats={{move, armour, defence, capacity }} zero=\"-\" />\n            {weapons.length? <Weapons items={weapons} />:<Description text={description}/>}\n            <StatBlock className=\"gear\" stats={{parked:\"parked\",slow:\"slow\",fast:\"fast\",reverse:\"reverse\"}} />\n            </div>\n             <CheckRibbon className=\"health\"   stat={health}/>\n            <Ratings value={ratings} />\n        </div>\n        </div></div>\n    }\n\n    renderUnit(card,theme)\n    {\n        let {__custom} = this.props.character;\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\"></div>\n        </div></div>\n    }\n\n    renderModel(card,theme) {\n        let { fight = 0, shoot = 0, defence = 0, mind = 0, body = 0, spirit = 0 } = this.props.character.stats;\n        let { health, ratings, weapons, name, role, type, photo, __custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let tags = this.props.character.genres || []\n        let __genres= __custom ? __custom.genres: null\n        \n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n             <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\" >\n            <Title name={name} alignment={T(role)} type={type} />\n            <Pic photo={photo} tint={__tint}/>\n            <StatBlock className=\"left\" stats={{ fight, shoot, defence }} />\n            <StatBlock className=\"right\" stats={{ mind, body, spirit }} />\n            <div className=\"sfxribbon\">\n                <dl><dt>Star quality</dt><dd>{qlty.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n                <dl><dt>Special effects</dt><dd>{sfx.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n            </div>\n            <Weapons items={weapons} />\n            <Ratings value={ratings} />\n            <CheckRibbon stat={health} className=\"health\" />\n            <Tags values={tags} additional={__genres} />\n            </div>\n        </div></div>\n    }\n\n    renderGadget(card, theme){\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let { health, ratings, weapons, name, role, type, notes='',__custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[\"card\",card,\"front\",theme].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\" ></div>\n        </div></div>\n    }\n    \n}\n\nexport class CardBack extends React.Component {\n\n    render() {\n        const card = (this.props.character.__card||\"Model\").toLowerCase()\n        const theme = (this.props.character.__theme||\"core\").toLowerCase()\n        switch(card) {\n            case \"vehicle_large\":\n                return this.renderVehicleLarge(card,theme);\n            break;\n            case \"vehicle\":\n                return this.renderVehicle(card,theme)\n            break;\n            case \"unit\":\n                return this.renderUnit(card,theme)\n            break;\n            case \"gadget_small\":\n                return this.renderGadget(card,theme)\n            break;\n            default:\n                return this.renderModel(card,theme)\n            break;\n        }\n    }\n    renderVehicle(card,theme){\n        let sfx = this.props.character.special_effects||[];\n        let {name, type=\"\",notes=\"\",weapons=[], description=\"\", __custom} = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name} type={type} />\n            <section>\n                {weapons.length && description? (<heading>Description</heading>):undefined}\n                {weapons.length && description? (<Description text={description}/>):undefined}\n                {sfx.length? (<heading>Special effects</heading>):undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes? (<heading>Notes</heading>):undefined}\n                <p>{notes}</p>\n            </section>\n            \n        </div>\n        </div></div>\n    }\n\n    renderVehicleLarge(card,theme){\n        let sfx = this.props.character.special_effects||[];\n        let {\n            name, type=\"\",notes=\"\",weapons=[], description=\"\", __custom, ratings, photo,\n            hood, trunk, body, chassis, engine\n            } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let vehicle=Object.keys(type)[0].toLowerCase();\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name}  />\n            <Pic className={vehicle} photo={photo} tint={__tint}/>\n            <section>\n                {weapons.length && description? (<heading>Description</heading>):undefined}\n                {weapons.length && description? (<Description text={description}/>):undefined}\n                {sfx.length? (<heading>Special effects</heading>):undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes? (<heading>Notes</heading>):undefined}\n                <p>{notes}</p>\n            </section>\n            <ModsTable character={this.props.character}/>\n            \n            <div className=\"totalratings\">{T('Total Vehicle Ratings')} <Ratings value={ratings} /></div>\n        </div>\n        </div></div>\n    }\n\n    renderUnit(card,theme) {\n        let {name, role, type=\"\",notes=\"\",models=[], description=\"\", photo, __custom} = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let tags = this.props.character.genres || []\n        let __genres= __custom ? __custom.genres: null\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name} alignment={T(role)} type={type} />\n            <Tags values={tags} additional={__genres} />\n            <div className=\"content\">\n                <Description text={description}/>\n                {models.map((m,i)=>{return <dl className=\"model\" key={i}><dt>{m.qty}</dt><dd>{m.model}</dd></dl>})}\n                <Pic photo={photo} tint={__tint}/>\n            </div>\n            </div>\n        </div></div>\n    }\n\n    renderModel(card,theme) {\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let { health, ratings, weapons, name, role, type, notes='',__custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n\n       \n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name} alignment={T(role)} type={type} />\n\n            <section>\n                {qlty.length? <heading>Star quality</heading> :undefined} \n                {qlty.map((v, i) => (<Trait key={i} object={v} full />))}\n                {sfx.length? <heading>Special effects</heading> : undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes && (<heading>Notes</heading>)}\n                <p>{notes}</p>\n            </section>\n            </div>\n        </div></div>\n    }\n\n    renderGadget(card,theme){\n        let { name, play, weapon, cost, description,__custom } = this.props.character\n        \n        let strike = (weapon.length)?weapon[0].strike:''\n        let range = (weapon.length)?weapon[0].range:''\n\n        let __tint = __custom? __custom.tint : 0\n\n        let stars = cost ? Array(cost).fill(\"\").map((v, i) => { return <i key={i} className=\"icon-star_icon\"></i> }) : \"Free\"\n\n        let stats = zip(Object.entries({play, cost:stars, range, strike}).filter((i)=>{ \n            let [key,value] = i; \n            return String(value!==undefined? value:\"\").length\n        }))\n\n        return <div className=\"cellophan\"><div className={[\"card\",card,\"back\",theme].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name}  />\n            <section className=\"content\">\n                <StatBlock stats={{ ...stats }} />\n                <Description text={description}/>\n            </section>\n            </div>\n        </div></div>\n    }\n}\n\n\n\nexport class Card extends React.Component {\n    render() {\n        let id = this.props.character.id;\n        let r = /_(large|small)$/gi.exec(this.props.character.__card);\n        let cardsize = r? r[1]:'standard'\n        return (<div \n            className={[\"viewport\",((id == this.props.currentCharacter)?\"selected\":null),cardsize].join(\" \")}\n            onClick={e =>  {e.stopPropagation(); this.props.dispatch({ type: 'CHARACTER_SELECT', payload: { id } })}}\n         >\n            <div  id={id}  >\n            <CardFront character={this.props.character} />\n            <CardBack character={this.props.character} />\n            </div>\n            <div className=\"ui paper\" style={{position:\"absolute\", right:0}}>\n\n            <DropdownButton bsSize=\"xsmall\" title=\"\" bsStyle=\"warning\" id={\"ddb-\"+id} >\n            <MenuItem eventKey=\"1\" onClick={e => {this.props.dispatch({ type: 'CHARACTER_REMOVE', payload: { id } })}}>Remove</MenuItem>\n            <MenuItem eventKey=\"2\" onClick={e => { downloadSingleCharacter(this.props.character)}}>Download</MenuItem>\n            <MenuItem eventKey=\"3\" onClick={e => { sendAsImage(id, \"7TV_cast-\"+slug(this.props.character.name||this.props.character.id)+\".png\")}}>Download as Single Image</MenuItem>\n            <MenuItem eventKey=\"4\" onClick={e => { sendAsImage(id, \"7TV_cast-\"+slug(this.props.character.name||this.props.character.id)+\"_{n}.png\",{selector:'.cellophan'})}}>Download as Separate Images</MenuItem>\n            </DropdownButton></div></div>)\n    }\n}\n\nCard = connect((state)=>{\n    return { currentCharacter: state.currentCharacter}\n})(Card);","/* eslint-disable */\nimport React from 'react';\nimport PropTypes from \"prop-types\";\nimport { DescriptionField } from \"react-jsonschema-form\";\nimport TextAreaWidget from \"react-jsonschema-form/lib/components/widgets/TextareaWidget\";\nimport ColorWidget from \"react-jsonschema-form/lib/components/widgets/ColorWidget\";\nimport FileWidget from \"react-jsonschema-form/lib/components/widgets/FileWidget\";\nimport TitleField  from \"react-jsonschema-form/lib/components/fields/TitleField\";\nimport ObjectField  from \"react-jsonschema-form/lib/components/fields/ObjectField\";\nimport ArrayField  from \"react-jsonschema-form/lib/components/fields/ArrayField\";\n\nimport { ButtonGroup, Button, Glyphicon, Collapse, Checkbox,  FormGroup, InputGroup, FormControl } from \"react-bootstrap\";\nimport { insertAtCaret } from '../lib/helpers'\nimport format from 'string-template'\nimport { sendAsFile, parseDataUri } from '../lib/helpers'\n\nimport ReactCrop, { makeAspectCrop } from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { SelectField } from 'material-ui';\n\nconst addNameToDataURL=(dataURL, name) => {\n  return dataURL.replace(\";base64\", `;name=${name};base64`);\n}\n\nconst getCroppedImg = (src, pixelCrop, fileName) => {\n \n  return new Promise((resolve,reject)=>{\n    const canvas = document.createElement('canvas');\n        canvas.width = pixelCrop.width;\n        canvas.height = pixelCrop.height;\n    const ctx = canvas.getContext('2d');\n    const image=new Image();\n          image.onload=function(){\n            \n            ctx.drawImage(\n              image,\n              pixelCrop.x,\n              pixelCrop.y,\n              pixelCrop.width,\n              pixelCrop.height,\n              0,\n              0,\n              pixelCrop.width,\n              pixelCrop.height\n            );\n            \n            resolve(addNameToDataURL(canvas.toDataURL('image/jpeg'),fileName))\n          }\n\n          image.src=src\n      })\n        \n}\n\nconst textToolsWidgets={\n  ToolInsertText:function(options,widget){\n    let insert=(text)=>{\n      let node=document.getElementById(widget.id);\n      insertAtCaret(node,text)\n      widget.onChange(node.value)\n    }\n    return (props)=>{\n      return <ButtonGroup bsSize=\"xsmall\">{options.map((text,i)=>{ \n        return <Button bsStyle=\"info\" key={i} onClick={e=>insert(text)}>Insert {text}</Button>})\n        }</ButtonGroup>\n    }\n  }\n}\n\nconst parseTextTools=(textTools,props)=>{\n    return Object.entries(textTools).map((entry, i)=>{\n      let [cmp, options] = entry;\n      let Fcmp=textToolsWidgets[cmp](options, props);\n      return <Fcmp key={i} />\n    })\n}\n\nexport function ToolTextareaWidget(props) {\n  const { options } =props\n  return (\n    <div>\n      {parseTextTools(options.textTools,{...props})}\n      <TextAreaWidget {...props}/>\n    </div>)\n}\n\nexport class PictureWidget extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={value:\"\", errorSchema:undefined, crop:{aspect:1}};\n    this.uploadHandler=this.uploadHandler.bind(this)\n    this.cropHandler=this.cropHandler.bind(this)\n    this.updateHandler=this.updateHandler.bind(this)\n    this.removeHandler=this.removeHandler.bind(this)\n  }\n\n  uploadHandler(value,errorSchema){\n    value=value.replace(/name=([^;]+);/gi,(str,p1)=>{return 'name='+encodeURIComponent(p1)+\";\"})\n    this.setState({value, errorSchema})\n    this.props.onChange(value,errorSchema);\n  }\n  cropHandler(crop,pixelCrop,fileName){\n    this.setState({crop, pixelCrop,fileName})\n  }\n  updateHandler(){\n    if (confirm(\"No Way Back!\")){\n      getCroppedImg(this.props.value, this.state.pixelCrop, this.state.fileName ).then((src)=>{\n        this.props.onChange(src,this.state.errorSchema);\n        this.setState({crop:{aspect:1}})\n      })\n    }\n  }\n\n  removeHandler(){\n    this.props.onChange(undefined);\n  }\n\n  render(){\n    \n    const {name, data, mime} = parseDataUri(this.props.value);\n    let fileprops={...this.props, onChange: this.uploadHandler}\n    return <div className=\"pictureWidget\">\n    <small>Drag to make a crop Marquee</small><br/>\n    <ReactCrop src={this.props.value||\"\"} crop={this.state.crop} onChange={(crop, pixelCrop)=>this.cropHandler(crop, pixelCrop,name)}/>\n    <br/>\n    <Button onClick={this.updateHandler} bsSize=\"xsmall\" bsStyle=\"danger\" disabled={!!!this.props.value}><Glyphicon glyph=\"pencil\"/> Crop</Button>\n    <Button onClick={e=>{sendAsFile(decodeURIComponent(name),data,mime)}} bsSize=\"xsmall\"  bsStyle=\"info\" disabled={!!!this.props.value}><Glyphicon glyph=\"download\"/> Download</Button>\n    <Button onClick={this.removeHandler} bsSize=\"xsmall\"  bsStyle=\"warning\" disabled={!!!this.props.value}><Glyphicon glyph=\"remove\"/> Remove</Button>\n    <hr/>\n    <FileWidget {...fileprops}/>\n    </div>\n  }\n}\n\nconst parseTools=(options,props)=>{\n  console.log(props)\n}\n\nexport function ToolArrayField(children) {\n  return (props)=>{\n    return <div><ArrayField {...props}/>{children.map((c,i)=>(React.cloneElement(c,{key:i, widget:props})))}</div>\n  }\n}\n\n\nexport const CollapseObjectField = function (props) {\n  let str=format(((props.uiSchema['ui:options']||{})['template'])||\"\",props.formData)\n  return <details>\n            <summary>{str}</summary>\n            <ObjectField {...props}/>\n          </details>\n};\n\nexport class ObjectSelectField extends React.Component {\n  constructor(props) {\n    /*\n    schema: The JSON schema for this field;\n    uiSchema: The uiSchema for this field;\n    idSchema: The tree of unique ids for every child field;\n    formData: The data for this field;\n    errorSchema: The tree of errors for this field and its children;\n    registry: A registry object (read next).\n    formContext: A formContext object (read next next).\n    */\n    super(props);\n    this.state = {value: props.formData};\n    this.options = props.schema.enum;\n    \n  }\n\n  onChange(e) {\n    this.setState({value: JSON.parse(e.target.value)},()=>{this.props.onChange(this.state.value)})\n  }\n\n  render() {\n    let props=this.props\n\n     \n      let widget=<select onChange={(e)=>{this.onChange(e)}} className=\"form-control\" id={props.idSchema.$id} value={JSON.stringify(this.state.value)}>\n        {this.options.map((option,i)=>{ return <option key={i} value={JSON.stringify(option)} >{Object.keys(option)[0]}</option> })}\n        </select>\n     \n\n    return (\n\n      <div>\n      {(props.uiSchema[\"ui:title\"] || props.schema.title) && (\n        <label id={`${props.idSchema.$id}__title`}>\n          {props.schema.title || props.uiSchema[\"ui:title\"]}\n        </label>\n      )}\n      {props.description && (\n        <DescriptionField\n          id={`${props.idSchema.$id}__description`}\n          description={props.schema.description}\n          formContext={props.formContext}\n        />\n      )}\n      {widget}\n    </div>\n      \n    );\n  }\n}\n  ","/* eslint-disable */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport {Accordion, Panel,Button, FormControl, FormGroup, InputGroup, Label } from 'react-bootstrap'\nimport Yaml from 'js-yaml';\nimport { readContext } from '../lib/helpers'\nimport { Marked } from './Ui'\n//import Holdable from 'react-holdable'\nimport UnsupportedField from '../../node_modules/react-jsonschema-form/lib/components/fields/UnsupportedField';\nimport uuid from 'uuid';\nimport dotProp from 'dot-prop';\n\nconst parseTrait=(label,text)=>{\n    let trait={}\n    if (typeof text === 'string') {\n        trait.description=text\n    } else {\n        trait=Object.assign({},text)\n    }\n    trait.cost=trait.cost || 0\n    if (!trait.name) trait.name=label\n    return trait;\n} \n\nclass TraitSelect extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.handleClick=this.handleClick.bind(this)\n        this.state={\n            data: {},\n            value:null\n        }\n        this.placeholder=\"Select item to add\"\n        \n    }\n\n    handleClick(e){\n        if (!this.state.value) return;\n        let formData=this.props.widget.formData;\n        this.props.widget.onChange([...formData,this.state.value],{ validate: false })\n    }\n\n    groupFilter(i){\n        return true;\n    }\n    traitFilter(i){\n        return true;\n    }\n    \n    render(){\n        return <FormGroup>\n                <InputGroup><FormControl componentClass=\"select\" placeholder={this.placeholder} defaultValue=\"\" onChange={e=>{this.setState(Object.assign(this.state,{value:JSON.parse(e.target.value)}))}}>\n            <option>{this.placeholder}</option>\n            {Object.entries(this.state.data).filter(this.groupFilter.bind(this)).map((entry,i)=>{\n                let [group,item]=entry;\n                return <optgroup key={i} label={group}>{Object.entries(item).filter(this.traitFilter.bind(this)).map((sfx_entry,j)=>{\n                    let [label,value]=sfx_entry;\n                    return <option key={j} value={JSON.stringify(parseTrait(label, value))}>{label}</option>\n                })}</optgroup>\n            })}\n        </FormControl><InputGroup.Button><Button bsStyle=\"success\" onClick={e=>{this.handleClick(e)}}>Add</Button></InputGroup.Button></InputGroup></FormGroup>\n    }\n}\n\nexport class SFXSelect extends TraitSelect {\n    \n    componentDidMount()\n    {\n        this.placeholder=\"Select SFX to add\"\n\n        fetch(require('../data/sfx.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)})}.bind(this))\n        })\n    }\n}\n\nSFXSelect=connect((state)=>({currentCharacter: state.currentCharacter}))(SFXSelect)\n\nexport class SQSelect extends TraitSelect {\n\n    componentDidMount()\n    {\n\n        this.placeholder=\"Select Star quality to add\"\n\n        fetch(require('../data/sfx-sq.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)})}.bind(this))\n        })\n    }\n    \n}\n\nSQSelect=connect((state)=>({currentCharacter: state.currentCharacter}))(SQSelect)\n\nexport class ModSelect extends TraitSelect {\n    componentDidMount()\n    {\n        this.placeholder=\"Select Mod to add\"\n        fetch(require('../data/mods.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)||{}})}.bind(this))\n        })\n    }\n\n    groupFilter(i) {\n        let type=null\n        if (type=dotProp.get(this.props.widget.formContext,\"type\",null)){\n            type=Object.keys(type)[0];\n            return i[0].search(new RegExp(\"^\"+type,\"gi\"))>-1;\n        }\n        return true;\n    }\n\n    \n}\n\nModSelect=connect((state)=>({currentCharacter: state.currentCharacter }))(ModSelect)\n\nexport const PROFILES=readContext(require.context('../data/casts', true))\n\nexport class ProfileSelector extends React.Component {\n    \n    constructor(props){\n        super(props)\n        this.state={\n            casting:{},\n            selected: null,\n            character:null\n        }\n    }\n\n    componentDidMount()\n    {\n        Object.entries(PROFILES).forEach(([file,path])=>{\n\n        fetch(path).then((response)=>{\n                response.text().then(function(txt){ \n                    let data={}\n                    Yaml.safeLoadAll(txt).forEach(item=>{\n                        data[item.name]=item;\n                    })\n                    this.setState({...this.state, casting: {...this.state.casting,[file.replace(/(^\\.\\/)|(\\.yaml$)/gi,'').replace(/_/gi,\" \")]:data}})\n                }.bind(this))\n            })\n        })\n\n     \n    }\n    /*  */\n    render(){\n        let cast;\n        let select = (item)=>{\n            let [selected, character] = item;\n            if (this.state.selected && (selected==this.state.selected)){\n                selected=null;\n                character=null;\n            }\n            \n            this.setState(Object.assign(this.state,{selected,character}))\n        }\n\n        let create = (item) =>{\n            let [selected, character] = item;\n            fromTemplate(character)\n        }\n\n        if (this.state.casting){\n            cast=(<Accordion>{Object.entries(this.state.casting).map((entry, i)=>{\n                let [key, chr] = entry;\n                return <Panel header={key} eventKey={i} key={i}><div className=\"listing\">\n                    {Object.entries(chr).map(\n                        (item,j)=>{\n                            let [name,char] = item;\n                            return <MiniCard character={item} key={j} selected={this.state.selected && (this.state.selected===name)} onClick={e=>{select(item)}} />\n                        }\n                    )}\n                </div></Panel>\n            })}</Accordion>)\n            \n        }\n\n        const fromTemplate=(item=null)=>{\n            if (!item) \n                item=this.state.character\n            this.props.dispatch({\n                type:'CHARACTER_NEW', \n                payload: Object.assign({},item,{name: item.name, profile: item.name})\n            });\n        }\n\n        return <div className=\"profileSelector\">\n            <h4>Select a character or Create new</h4>\n            {cast}\n            <Button onClick={e=>fromTemplate()} bsStyle=\"primary\" block disabled={!this.state.selected}>New from template</Button>\n        </div>\n    }\n}\n\nProfileSelector=connect()(ProfileSelector)\n    \nexport class MiniCard extends React.Component {\n    render(){\n        let [name, item] = this.props.character;\n        return <dl className={\"miniCard \"+((this.props.selected)?'selected':'')} onClick={this.props.onClick}>\n            <dt>{name} {item.ratings? `(${item.ratings})`:''} {item.__card? '':<Label>Incomplete</Label>}</dt>\n            <dd><Marked md={item.description}/></dd>\n        </dl>\n    }\n}","/* eslint-disable */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from 'react-bootstrap'\n\nimport Form, {DescriptionField} from \"react-jsonschema-form\";\n\nimport '../assets/bootstrap/css/paper.min.css'\nimport '../assets/editor.css'\n\n\nimport { dataURItoBlob } from '../lib/helpers'\nimport { ToolTextareaWidget , ToolArrayField, CollapseObjectField, PictureWidget, PickColorWidget, ObjectSelectField} from './FormWidgets'\nimport { SFXSelect, SQSelect, ModSelect, ProfileSelector, MiniCard} from './CharacterWidgets'\n\nconst getCharacterById=(id, cast)=>{\n    return cast.find(item=>{return item.id == id})\n}\n\nconst applyToProps=(dict,props,value)=>{\n    return Object.assign(dict,\n        props.reduce((obj,item)=>{obj[item]=value;return obj;},{})\n    );\n}\n\nconst diff=(arr1,arr2)=>{\n    return arr2.filter(function(i) {return arr1.indexOf(i) < 0;});\n}\n\nconst log = (type) => console.log.bind(console, type);\n\n\nconst SfxArrayField=ToolArrayField([<SFXSelect/>])\nconst SQArrayField=ToolArrayField([<SQSelect/>])\nconst ModArrayField=ToolArrayField([<ModSelect/>])\n\nexport class CharacterEditor extends React.Component {\n    \n    constructor(props){\n        super(props);\n        this.handleChange=this.handleChange.bind(this)\n    }\n\n    handleChange(data){\n        if (this.props.onChange)\n            this.props.onChange(data)\n    }\n\n    render(){\n        let character=getCharacterById(this.props.characterId, this.props.cast);\n\n        if (!character) \n            return <div className=\"paper characterEditor\"><div style={{margin:20}}><ProfileSelector/></div></div>;\n\n        const card=character.__card.toLowerCase();\n        const sch=require('../data/'+card+'-uischema.json')\n        const uiSchema=sch//applyToProps(sch,[...diff(sch['ui:order'],Object.keys(character)),'__card','__version','id'],{'ui:widget':'hidden'})\n        const schema = require('../data/'+card+'-schema.json');\n\n        const widgets={\n            toolTextareaWidget:ToolTextareaWidget,\n            pictureWidget:PictureWidget,\n        }\n        const fields={\n            collapseObjectField:CollapseObjectField,\n            sfxArrayField:SfxArrayField,\n            sqArrayField:SQArrayField,\n            modArrayField:ModArrayField,\n            objectSelectField:ObjectSelectField\n        }\n        return <div className=\"paper characterEditor\">\n            <div style={{margin:20}}>\n            <Form schema={schema}\n                onChange={this.handleChange}\n                onSubmit={log(\"submitted\")}\n                onError={log(\"errors\")}\n                uiSchema={uiSchema}\n                liveValidate\n                formData = {character}\n                formContext = {character}\n                widgets={widgets}\n                fields={fields}\n                ><Button bsStyle=\"danger\" block type=\"submit\">Validate</Button></Form>\n                </div>\n        </div>\n    }\n}\n\n\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { Card } from './Card'\nimport { Toolbar, Help, Rescue } from './Ui'\nimport { CharacterEditor } from './CharacterEditor'\nimport SplitPane from 'react-split-pane'\nimport '../assets/resizer.css'\nimport { isChrome } from 'react-device-detect'\n\nconst ChromeNag=function(){\n  if (!isChrome)\n    return <div className=\"chromeNag\">Please use Chrome browser for a better experience</div>\n  return null\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        \n        <SplitPane split=\"vertical\" minSize={300} \n              defaultSize={ parseInt(localStorage.getItem('splitPos')||300, 10) }\n              onChange={ size => localStorage.setItem('splitPos', size) }>\n          \n          <div className=\"sidebar ui \" >\n            <Toolbar/>\n            <Help/>\n            <CharacterEditor \n              characterId={this.props.currentCharacter} \n              cast={this.props.cast}\n              onChange={this.props.updateCharacter}\n            />\n            <Rescue/>\n          </div>\n          <div className=\"canvas\" onClick={e=>this.props.deselectCharacter(e)}>\n          <ChromeNag/>\n          {\n            this.props.cast.map((character,j)=>{return <Card character={character} key={j}/>})\n          }</div>\n        </SplitPane>\n      </div>\n    );\n  }\n}\n\nexport default App = connect(\n  (state)=>{\n    return state\n  },\n  (dispatch)=>{\n    return {\n      deselectCharacter:()=>{\n        dispatch({type:\"CHARACTER_SELECT\",payload: {id:null}})\n      },\n      updateCharacter: (data)=>{\n        dispatch({type:\"CHARACTER_UPDATE\",payload: data.formData})\n      }\n    }\n  })(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport logger from 'redux-logger';\nimport { compose, createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers/index'\nimport App from './components/App';\nimport './assets/index.css';\nimport './assets/icons/css/7tv2-core.css'\nimport './assets/icons/css/7tv2-fantasy.css'\n\nimport persistState from 'redux-localstorage';\nimport mergePersistedState from 'redux-localstorage/lib/mergePersistedState'\nimport adapter from 'redux-localstorage/lib/adapters/localStorage';\nimport filter from 'redux-localstorage-filter';\n\nimport Locale from './lib/simple-locale'\n\nexport const LOCALSTORAGE_KEY = 'Studios7TV'\nexport const locale = new Locale({ gb_EN: 'gb_EN'});\n\nlocale.load(locale.gb_EN, require('./i18n/gb_EN.json'));\nlocale.set(locale.gb_EN)\n\n\nexport const T=(str=\"\",params={})=>{\n  return locale.get(str,params);\n}\n\nexport const zip=function(arr){\n  return arr.reduce(function(obj, [k, v]){return { ...obj, [k]: v }}, {});\n}\n\nconst storeReducer = compose(\n  mergePersistedState()\n)(reducer);\n\nconst storage = compose(\n  filter('cast','currentCharacter')\n)(adapter(window.localStorage));\n\nconst enhancer = compose(\n  applyMiddleware(logger),\n  persistState(storage, LOCALSTORAGE_KEY)\n);\n\nexport const store = createStore(storeReducer , enhancer);\n\n//export const store = createStore(reducer);\n\nReactDOM.render(\n  <Provider store={store}>\n  <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","var map = {\n\t\"./gadget_small-schema.json\": 717,\n\t\"./model-schema.json\": 718,\n\t\"./unit-schema.json\": 719,\n\t\"./vehicle-schema.json\": 720,\n\t\"./vehicle_large-schema.json\": 721\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 372;","module.exports = __webpack_public_path__ + \"static/media/mods.6caa37f3.yaml\";","\nfunction simpleLocale(locales) {\n\tif(typeof locales !== 'object') \n\t\tthrow new Error('Locale object must be specified.');\n\n\tfor(var key in locales) {\n\t\tif(locales.hasOwnProperty(key)) {\n\t\t\tthis[key] = locales[key];\n\t\t}\n\t}\n\n\tthis.currentLocale = '';\n\tthis.localeString = {};\n}\nsimpleLocale.prototype.hasLocale = function(loc) {\n\treturn loc in this;\n};\nsimpleLocale.prototype.load = function(countryCode, lObj) {\n\tif(!this.hasLocale(countryCode)) {\n\t\tthrow new Error('Unknown locale ' + countryCode);\n\t}\n\n\tthis.localeString[countryCode] = lObj;\n};\nsimpleLocale.prototype.set = function(newLocale) {\n\tif(!this.hasLocale(newLocale)) {\n\t\tthrow new Error('Unknown locale ' + newLocale);\n\t}\n\n\tthis.currentLocale = newLocale;\n};\nsimpleLocale.prototype.get = function(key, bindStr) {\n\tlet pos = this.localeString[this.currentLocale];\n\tlet splittedKey = key.split(\".\");\n\n\tif(!pos) {\n\t\tthrow new Error('Locale is not selected.');\n\t}\n\n\tfor(let i = 0; i < splittedKey.length; i++ ) {\n\t\tpos = pos[splittedKey[i]];\n\n\t\t// if no string found, just returns key\n\t\tif(!pos) {\n\t\t\treturn key;\n\t\t}\n\t}\n\n\t// let's match template strings.\n\tfor(var word in bindStr) {\n\t\tpos = pos.replace(new RegExp('<%=\\\\s{0,}' + word + '\\\\s{0,}%>', \"g\"), bindStr[word]);\n\t}\n\n\treturn pos;\n};\n\nmodule.exports = simpleLocale;","var map = {\n\t\"./gadget_small-blank.json\": 712,\n\t\"./model-blank.json\": 713,\n\t\"./unit-blank.json\": 714,\n\t\"./vehicle-blank.json\": 715,\n\t\"./vehicle_large-blank.json\": 716\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 711;","module.exports = \"#### 7TV2 Casting Agency - worker's manual\\n\\n\\nWelcome to our top-notch Casting Agency. We are devoted to find the best actors to our productions.\\nIn order to do so, please follow this advices:\\n\\n- Contract new assets with [NEW]. Be sure you choose the recommended asset, for a single Actor (Character), Contraptions (Vehicles), or Figuring groups (Unit)\\n- You can recall former assets on our filing cabinets using with [OPEN] the Yet Another Actor Log protocol.\\n- In order to file their CV once they have finished their job, use [DOWNLOAD YAML]. You can also take photos of them [DOWNLOAD IMAGES]\\n- To dismiss all the assets you can use [RESET ALL]\\n\\n\\n**You can browse our profile books for easy use of assets. Please be aware former departament was fired because they have not filled properly this section. Any inquiries of this kind will be accepted through the attached form. Contributions are welcomed. Just build the intended profile and send via Vacuum Tube to our <a href=\\\"https://github.com/jorgerobles/7tv2/issues\\\" target=\\\"_blank\\\">GITHUB</a>.**\\n\\nSome hints for proper usage:\\n\\n- Profile photos should be cut SQUARE to fit on their cards.\\n- You can embellish your text using the <a href=\\\"https://guides.github.com/features/mastering-markdown/\\\" target=\\\"_blank\\\">MarkDown style guide</a>\\n\\n---\\nTBD. This file could be contributed by <a href=\\\"https://github.com/jorgerobles/7tv2/blob/master/src/HELP.md\\\" target=\\\"_blank\\\">volunteering</a>. Don't be lazy.\\n___\\n\""],"sourceRoot":""}