{"version":3,"sources":["data sync /^/.//.*/-schema/.json$","data/mods.yaml","lib/simple-locale.js","data sync /^/.//.*/-blank/.json$","HELP.md","data/sfx.yaml","data/sfx-sq.yaml","data/casts sync /^/.//.*$","data/casts/Core_Gadgets.yaml","data/casts/Core_Heroic_Extras.yaml","data/casts/Core_Heroic_Star_Co-Star.yaml","data/casts/Core_Neutral_Extras.yaml","data/casts/Core_Vehicles.yaml","data/casts/Core_Villainous_Extras.yaml","data/casts/Core_Villainous_Star_Co-Star.yaml","data sync /^/.//.*/-uischema/.json$","reducers/index.js","lib/helpers.js","components/Ui.js","components/Card.js","components/FormWidgets.js","components/CharacterWidgets.js","components/CharacterEditor.js","components/App.js","index.js"],"names":["map","./gadget_small-schema.json","./model-schema.json","./unit-schema.json","./vehicle-schema.json","./vehicle_large-schema.json","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","simpleLocale","locales","key","hasOwnProperty","this","currentLocale","localeString","prototype","hasLocale","loc","load","countryCode","lObj","set","newLocale","get","bindStr","pos","splittedKey","split","i","length","word","replace","RegExp","./gadget_small-blank.json","./model-blank.json","./unit-blank.json","./vehicle-blank.json","./vehicle_large-blank.json","./Core_Gadgets.yaml","./Core_Heroic_Extras.yaml","./Core_Heroic_Star_Co-Star.yaml","./Core_Neutral_Extras.yaml","./Core_Vehicles.yaml","./Core_Villainous_Extras.yaml","./Core_Villainous_Star_Co-Star.yaml","./gadget_small-uischema.json","./model-uischema.json","./unit-uischema.json","./vehicle-uischema.json","./vehicle_large-uischema.json","ajv","Ajv","addMetaSchema","require","loadYamlFile","file","asSingleFile","arguments","undefined","Promise","accept","reject","reader","FileReader","onload","data","Yaml","safeLoad","result","objs","safeLoadAll","obj","push","console","error","readAsText","saveYamlFile","docs","options","skipInvalid","Array","isArray","doc","safeDump","cleanDeep","emptyArrays","emptyObjects","emptyStrings","nullValues","join","INITIALSTATE","currentCharacter","cast","reducer","state","action","assign","TEMPLATE_CHARACTER_NEW","payload","templatename","__card","toLowerCase","getTemplateCharacterNew","type","actionTypes","INIT","validateState","uid","uuid","v4","toConsumableArray","concat","name","Math","round","random","first","middle","last","__version","version","slice","filter","item","value","char","sendAsFile","filename","mimetype","blob","Blob","tempLink","document","createElement","href","window","URL","createObjectURL","setAttribute","style","display","body","appendChild","click","remove","parseDataUri","groups","exec","mime","forEach","_item$split","_item$split2","slicedToArray","dataURI","byteString","atob","mimeString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","dataURItoBlob","sendAsImage","domId","opts","el","getElementById","nodes","selector","querySelectorAll","node","index","getAsImage","then","dataUrl","link","download","html2canvas","canvas","toDataURL","FileField","_React$Component","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","_domclick","ce","_this2","preventDefault","modifiers","ctrl","ctrlKey","shift","shiftKey","meta","metaKey","input","__changeHandler","removeEventListener","onChange","addEventListener","bind","assertThisInitialized","inherits","createClass","clicker","_this3","react_default","a","ref","children","multiple","React","Component","dottedLine","xFrom","yFrom","xTo","yTo","segmentLength","abs","b","c","sqrt","pow","fractions","adjustedSegmentLength","floor","ceil","deltaX","deltaY","curX","curY","line","chunk","r","j","fn","reduce","g","cardGrid","_cardFactor3","cardFactor","_cardFactor4","fw","fh","from","v","x","y","cardCuts","setLineWidth","setDrawColor","MARGIN_Y","MARGIN_X","Marked","_ref","_ref$md","md","_ref$Component","_ref$Options","Options","rest","objectWithoutProperties","__html","marked","inline","objectSpread","dangerouslySetInnerHTML","Toolbar","_React$Component2","_getPrototypeOf2","_this5","_len","args","_key","apply","status","setState","forceUpdate","_this6","className","textAlign","marginBottom","marginTop","margin","react_bootstrap_es","bsStyle","bsSize","title","eventKey","onClick","dispatch","Ui_FileField","files","target","characterLoader","Queue","Infinity","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","add","catch","err","return","loadCharacter","block","glyph","characters","slug","scale","fileName","warn","jsPDF","orientation","format","unit","promises","sort","sortBy","rs","rj","img","dataURL","all","items","cn","positions","itemsperpage","page","addPage","_cardFactor","_cardFactor2","addImage","save","downloadCharactersAsPDF","confirm","connect","Help","_React$Component3","_getPrototypeOf3","_this7","_len2","_key2","open","_this8","in","Rescue","_React$Component4","_this9","dropup","Date","JSON","stringify","StatBlock","stats","_ref$className","_ref$zero","zero","entries","entry","_entry","Pic","_ref2","photo","backgroundImage","Weapons","_ref3","colspan","effects","rowSpan","colSpan","isString","attack","range","strike","_entry2","Ui_Marked","ModsTable","mods","fetch","response","text","txt","list","character","_Object$entries$","ratings","location","classify","Card_CheckRibbon","stat","mod","indent","mounted","Ratings","_ref4","Trait","_ref5","object","full","cost","level","description","stars","fill","Description","_ref6","Title","_ref7","_ref7$name","_ref7$alignment","alignment","_ref7$type","_type","Tags","_ref8","values","_ref8$additional","additional","src","CheckRibbon","_ref9","slots","Number","CardFront","card","theme","__theme","renderVehicle","renderVehicleLarge","renderUnit","renderGadget","renderModel","_this$props$character","_this$props$character2","health","_this$props$character3","_this$props$character4","_this$props$character5","weapons","__custom","__tint","tint","__genres","genres","tags","sfx","special_effects","_this$props$character6","_this$props$character7","capacity","_this$props$character8","armour","_this$props$character9","defence","Card_Title","Card_Pic","Card_StatBlock","Card_Weapons","Card_Description","s","Card_Trait","Card_Ratings","Card_Tags","_this$props$character10","_this$props$character11","_this$props$character12","_this$props$character13","_this$props$character14","_this$props$character15","move","_this$props$character16","_this$props$character17","_this$props$character18","vehicle","hood","engine","trunk","chassis","parked","slow","fast","reverse","_this$props$character24","_this$props$character25","fight","_this$props$character26","shoot","_this$props$character27","_this$props$character28","mind","_this$props$character29","_this$props$character30","spirit","_this$props$character31","role","qlty","star_quality","T","_this$props$character32","notes","CardBack","_this$props$character34","_this$props$character35","_this$props$character36","_this$props$character37","_this$props$character38","_this$props$character39","_this$props$character40","_this$props$character41","_this$props$character42","_this$props$character43","Card_ModsTable","_this$props$character44","_this$props$character45","_this$props$character47","models","_this$props$character48","m","qty","model","_this$props$character49","_this$props$character50","_this$props$character51","play","weapon","zip","_i","String","Card","_this4","cardsize","stopPropagation","Card_CardFront","Card_CardBack","position","right","textToolsWidgets","ToolInsertText","widget","insert","txtarea","scrollPos","scrollTop","strPos","br","selectionStart","selection","focus","createRange","moveStart","front","substring","back","ieRange","moveEnd","select","selectionEnd","insertAtCaret","parseTextTools","textTools","cmp","Fcmp","ToolTextareaWidget","TextareaWidget_default","PictureWidget","errorSchema","crop","aspect","uploadHandler","cropHandler","updateHandler","removeHandler","str","p1","encodeURIComponent","pixelCrop","width","height","ctx","getContext","image","Image","drawImage","_parseDataUri","fileprops","react_image_crop_default","disabled","decodeURIComponent","FileWidget_default","ToolArrayField","ArrayField_default","cloneElement","CollapseObjectField","uiSchema","formData","ObjectField_default","ObjectSelectField","schema","enum","parse","idSchema","$id","option","react_jsonschema_form_lib","formContext","TraitSelect","handleClick","placeholder","validate","componentClass","defaultValue","groupFilter","group","label","traitFilter","sfx_entry","_sfx_entry","trait","parseTrait","Button","SFXSelect","_TraitSelect","SQSelect","_TraitSelect2","ModSelect","_TraitSelect3","dotProp","search","PROFILES","k","defineProperty","readContext","ProfileSelector","casting","selected","path","chr","header","_item3","build_default","onHoldComplete","_item2","fromTemplate","create","onClickComplete","_item","CharacterWidgets_MiniCard","profile","MiniCard","log","SfxArrayField","CharacterWidgets_SFXSelect","SQArrayField","CharacterWidgets_SQSelect","ModArrayField","CharacterWidgets_ModSelect","CharacterEditor","handleChange","characterId","find","CharacterWidgets_ProfileSelector","dict","arr1","arr2","sch","indexOf","ui:widget","widgets","toolTextareaWidget","pictureWidget","fields","collapseObjectField","sfxArrayField","sqArrayField","modArrayField","objectSelectField","react_jsonschema_form_lib_default","onSubmit","onError","liveValidate","App","index_esm","minSize","defaultSize","parseInt","localStorage","getItem","size","setItem","Ui_Toolbar","Ui_Help","CharacterEditor_CharacterEditor","updateCharacter","Ui_Rescue","deselectCharacter","Card_Card","LOCALSTORAGE_KEY","locale","Locale","gb_EN","params","arr","storeReducer","compose","mergePersistedState","storage","adapter","enhancer","applyMiddleware","logger","persistState","store","createStore","ReactDOM","render","es","components_App"],"mappings":"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","file":"static/js/main.31a142a8.chunk.js","sourcesContent":["var map = {\n\t\"./gadget_small-schema.json\": 620,\n\t\"./model-schema.json\": 621,\n\t\"./unit-schema.json\": 622,\n\t\"./vehicle-schema.json\": 623,\n\t\"./vehicle_large-schema.json\": 624\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 314;","module.exports = __webpack_public_path__ + \"static/media/mods.6caa37f3.yaml\";","\nfunction simpleLocale(locales) {\n\tif(typeof locales !== 'object') \n\t\tthrow new Error('Locale object must be specified.');\n\n\tfor(var key in locales) {\n\t\tif(locales.hasOwnProperty(key)) {\n\t\t\tthis[key] = locales[key];\n\t\t}\n\t}\n\n\tthis.currentLocale = '';\n\tthis.localeString = {};\n}\nsimpleLocale.prototype.hasLocale = function(loc) {\n\treturn loc in this;\n};\nsimpleLocale.prototype.load = function(countryCode, lObj) {\n\tif(!this.hasLocale(countryCode)) {\n\t\tthrow new Error('Unknown locale ' + countryCode);\n\t}\n\n\tthis.localeString[countryCode] = lObj;\n};\nsimpleLocale.prototype.set = function(newLocale) {\n\tif(!this.hasLocale(newLocale)) {\n\t\tthrow new Error('Unknown locale ' + newLocale);\n\t}\n\n\tthis.currentLocale = newLocale;\n};\nsimpleLocale.prototype.get = function(key, bindStr) {\n\tlet pos = this.localeString[this.currentLocale];\n\tlet splittedKey = key.split(\".\");\n\n\tif(!pos) {\n\t\tthrow new Error('Locale is not selected.');\n\t}\n\n\tfor(let i = 0; i < splittedKey.length; i++ ) {\n\t\tpos = pos[splittedKey[i]];\n\n\t\t// if no string found, just returns key\n\t\tif(!pos) {\n\t\t\treturn key;\n\t\t}\n\t}\n\n\t// let's match template strings.\n\tfor(var word in bindStr) {\n\t\tpos = pos.replace(new RegExp('<%=\\\\s{0,}' + word + '\\\\s{0,}%>', \"g\"), bindStr[word]);\n\t}\n\n\treturn pos;\n};\n\nmodule.exports = simpleLocale;","var map = {\n\t\"./gadget_small-blank.json\": 615,\n\t\"./model-blank.json\": 616,\n\t\"./unit-blank.json\": 617,\n\t\"./vehicle-blank.json\": 618,\n\t\"./vehicle_large-blank.json\": 619\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 614;","module.exports = \"#### 7TV2 Casting Agency - worker's manual\\n\\n\\nWelcome to our top-notch Casting Agency. We are devoted to find the best actors to our productions.\\nIn order to do so, please follow this advices:\\n\\n- Contract new assets with [NEW]. Be sure you choose the recommended asset, for a single Actor (Character), Contraptions (Vehicles), or Figuring groups (Unit)\\n- You can recall former assets on our filing cabinets using with [OPEN] the Yet Another Actor Log protocol.\\n- In order to file their CV once they have finished their job, use [DOWNLOAD YAML]. You can also take photos of them [DOWNLOAD IMAGES]\\n- To dismiss all the assets you can use [RESET ALL]\\n\\n\\n**You can browse our profile books for easy use of assets. Please be aware former departament was fired because they have not filled properly this section. Any inquiries of this kind will be accepted through the attached form. Contributions are welcomed. Just build the intended profile and send via Vacuum Tube to our <a href=\\\"https://github.com/jorgerobles/7tv2/issues\\\" target=\\\"_blank\\\">GITHUB</a>.**\\n\\nSome hints for proper usage:\\n\\n- Profile photos should be cut SQUARE to fit on their cards.\\n- You can embellish your text using the <a href=\\\"https://guides.github.com/features/mastering-markdown/\\\" target=\\\"_blank\\\">MarkDown style guide</a>\\n\\n---\\nTBD. This file could be contributed by <a href=\\\"https://github.com/jorgerobles/7tv2/blob/master/src/HELP.md\\\" target=\\\"_blank\\\">volunteering</a>. Don't be lazy.\\n___\\n\"","module.exports = __webpack_public_path__ + \"static/media/sfx.6a2dd9ee.yaml\";","module.exports = __webpack_public_path__ + \"static/media/sfx-sq.423a1cce.yaml\";","var map = {\n\t\"./Core_Gadgets.yaml\": 927,\n\t\"./Core_Heroic_Extras.yaml\": 928,\n\t\"./Core_Heroic_Star_Co-Star.yaml\": 929,\n\t\"./Core_Neutral_Extras.yaml\": 930,\n\t\"./Core_Vehicles.yaml\": 931,\n\t\"./Core_Villainous_Extras.yaml\": 932,\n\t\"./Core_Villainous_Star_Co-Star.yaml\": 933\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 926;","module.exports = __webpack_public_path__ + \"static/media/Core_Gadgets.4cbc0194.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Heroic_Extras.dd847c38.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Heroic_Star_Co-Star.0b8fed6e.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Neutral_Extras.5a9919fa.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Vehicles.14625b48.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Villainous_Extras.8330d9bc.yaml\";","module.exports = __webpack_public_path__ + \"static/media/Core_Villainous_Star_Co-Star.f9620acb.yaml\";","var map = {\n\t\"./gadget_small-uischema.json\": 935,\n\t\"./model-uischema.json\": 936,\n\t\"./unit-uischema.json\": 937,\n\t\"./vehicle-uischema.json\": 938,\n\t\"./vehicle_large-uischema.json\": 939\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 934;","import {version} from '../../package.json';\nimport uuid from 'uuid';\nimport Yaml from 'js-yaml';\nimport cleanDeep from 'clean-deep';\nimport { first, middle, last} from 'random-name'\nimport {actionTypes} from 'redux-localstorage'\nimport Ajv from 'ajv';\nconst ajv = new Ajv();\n      ajv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-04.json'));\n\nconst randomName=()=>{\n    return (Math.round(Math.random())?first():middle())+\" \"+last();\n}\n\nexport const loadYamlFile = (file,asSingleFile=false) => {\n    return () => {\n        return new Promise((accept, reject) => {\n            let reader = new FileReader();\n            reader.onload = (data) => {\n                try {\n                    if (asSingleFile){\n                        accept(Yaml.safeLoad(reader.result))\n                    } else {\n                        let objs = [];\n                        Yaml.safeLoadAll(reader.result, (obj) => { objs.push(obj) });\n                        accept(objs)\n                    }\n                } catch (e) {\n                    console.error(e)\n                    reject(e)\n                }\n            }\n            reader.readAsText(file);\n        })\n    }\n}\n\nexport const saveYamlFile=(docs,asSingleFile=false, options={skipInvalid:true})=>{\n    if (asSingleFile && Array.isArray(docs)){\n        return docs.map((doc)=>{\n            try {\n                return Yaml.safeDump(cleanDeep(doc,{emptyArrays:false, emptyObjects:false, emptyStrings:false, nullValues:false}), options)\n            } catch(e) {\n                console.error(doc)\n            }\n        }).join(\"\\n---\\n\")\n        \n    } else {\n        return Yaml.safeDump(docs, options);\n    }\n}\n\nconst INITIALSTATE = {\n    currentCharacter:null,\n    cast: []\n}\n\nconst getTemplateCharacterNew=(payload, templatename='model')=>{\n    if (payload && payload.__card)\n        templatename=payload.__card;\n    return require('../data/'+templatename.toLowerCase()+'-blank.json')\n}\n\nconst reducer = (state = INITIALSTATE, action) => {\n    state = Object.assign({}, state)\n    const TEMPLATE_CHARACTER_NEW = getTemplateCharacterNew(action.payload)\n    switch (action.type) {\n        case actionTypes.INIT:\n            return validateState(state);\n            break;\n        case \"CHARACTER_NEW\":\n            let uid=uuid.v4();\n            state.cast = [...state.cast, Object.assign({},TEMPLATE_CHARACTER_NEW, { id: uid, name: randomName(), __version: version }, action.payload || {})];\n            state.currentCharacter=uid\n            break;\n        case \"CHARACTER_LOAD\":\n            state.cast = [...state.cast, Object.assign({},TEMPLATE_CHARACTER_NEW,action.payload, { id: uuid.v4() })];\n            break;\n        case \"CHARACTER_REMOVE\":\n            state.cast = state.cast.slice().filter((item) => { return item.id !== action.payload.id; })\n            break;\n        case \"CHARACTER_SELECT\":\n            state.currentCharacter=action.payload.id;\n            break;\n        case \"CHARACTER_UPDATE\":\n            state.cast = state.cast.slice().map((item)=>{\n                if (item.id!==action.payload.id)\n                    return item;\n                return action.payload;\n            })\n            break;\n        case \"CHARACTER_APPEND_TRAIT\":\n            if (!action.payload.value) return;\n            state.cast = state.cast.slice().map((item)=>{\n                if (item.id!==action.payload.id)\n                    return item;\n                let char=Object.assign({},item)\n                    char[action.payload.key].push(action.payload.value)\n\n                return char;\n            })\n            break;\n           \n        case \"CAST_CLEAR\":\n            state.cast=[]\n        break;\n        default:\n            return state;\n    }\n    return state;\n}\n\nexport default reducer;\n\n\nconst validateState=(state)=>{\n    return state;\n    state.cast= state.cast.slice().map((item)=>{\n        const schema = require('../data/'+item.__card.toLowerCase()+'-schema.json');\n        let validate = ajv.compile(schema);\n        if (validate(item)){\n            return item\n        } else {\n            alert(validate.errors)\n            return item;\n            \n        };\n    })\n    return state;\n}","//import domtoimage from 'dom-to-image';\nimport html2canvas from 'html2canvas';\n\nexport function sendAsFile(filename, data, mimetype) {\n    \n    let blob = new Blob([data], {type: mimetype});\n\n    let tempLink = document.createElement('a');\n        tempLink.href = window.URL.createObjectURL(blob);\n        tempLink.setAttribute('download', filename);\n        tempLink.style.display='none'\n        document.body.appendChild(tempLink);\n        tempLink.click();\n        tempLink.remove();\n}\n\nexport function parseDataUri(data) {\n    if (!data) \n        return {};\n    let rex=/data:([^;]+);(?:([^;]+)?;)+(base64,.*$)/gi\n    let result={}\n    let groups= rex.exec(data);\n        if (groups){\n            result.mime=groups[1]\n        }\n        if (groups.length>2) {\n            groups.slice(2,groups.length-1).forEach((item)=>{\n                let [key,value]=item.split(\"=\")\n                result[key]=value\n            })\n        } \n        \n        result.data=dataURItoBlob(data);\n    \n    return result;\n}\n\nexport function dataURItoBlob(dataURI) {\n    // convert base64 to raw binary data held in a string\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n    var byteString = atob(dataURI.split(',')[1]);\n  \n    // separate out the mime component\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\n  \n    // write the bytes of the string to an ArrayBuffer\n    var ab = new ArrayBuffer(byteString.length);\n  \n    // create a view into the buffer\n    var ia = new Uint8Array(ab);\n  \n    // set the bytes of the buffer to the correct values\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n  \n    // write the ArrayBuffer to a blob, and you're done\n    var blob = new Blob([ab], {type: mimeString});\n    return blob;\n  \n  }\n\n  export function sendAsImage(domId, filename,opts={})\n  {\n    let el=document.getElementById(domId)\n    let nodes= (opts.selector) ? el.querySelectorAll(opts.selector) : [el];\n\n    \n    nodes.forEach(function(node,index){\n        index = (nodes.length>1) ? index:''\n        getAsImage(node,opts)\n            .then(function (dataUrl) {\n                var link = document.createElement('a');\n                    link.download = filename.replace('{n}',index) || (\"7tv_cast-\"+domId+\".png\");\n                    link.style='display:none'\n                    link.href = dataUrl;\n                    document.body.appendChild(link)\n                    link.click();\n                    link.remove();\n\n            }); \n    })\n  }\n\n  export function getAsImage(node, opts={}){\n        /*if (opts.scale){\n            let rect=node.getBoundingClientRect();\n                opts=Object.assign(opts,{\n                style: {\n                    transform:`scale(${opts.scale})`,\n                    transformOrigin:\"left top\",\n                },\n                width: rect.width*opts.scale,\n                height: rect.height*opts.scale\n            }) \n        }\n        return domtoimage.toPng(node,opts);\n        */\n        \n        return new Promise((resolve)=>{\n            html2canvas(node,opts).then(function(canvas) {\n                resolve(canvas.toDataURL(\"image/png\"));\n            })\n        });\n  }\n\nexport function insertAtCaret(txtarea, text) {\n\n    if (!txtarea) { return; }\n\n    var scrollPos = txtarea.scrollTop;\n    var strPos = 0;\n    var br = ((txtarea.selectionStart || txtarea.selectionStart === '0') ?\n        \"ff\" : (document.selection ? \"ie\" : false ) );\n    if (br === \"ie\") {\n        txtarea.focus();\n        var range = document.selection.createRange();\n        range.moveStart ('character', -txtarea.value.length);\n        strPos = range.text.length;\n    } else if (br === \"ff\") {\n        strPos = txtarea.selectionStart;\n    }\n\n    var front = (txtarea.value).substring(0, strPos);\n    var back = (txtarea.value).substring(strPos, txtarea.value.length);\n    txtarea.value = front + text + back;\n    strPos += text.length;\n    if (br === \"ie\") {\n        txtarea.focus();\n        var ieRange = document.selection.createRange();\n        ieRange.moveStart ('character', -txtarea.value.length);\n        ieRange.moveStart ('character', strPos);\n        ieRange.moveEnd ('character', 0);\n        ieRange.select();\n    } else if (br === \"ff\") {\n        txtarea.selectionStart = strPos;\n        txtarea.selectionEnd = strPos;\n        txtarea.focus();\n    }\n\n    txtarea.scrollTop = scrollPos;\n}\n\nexport const readContext=(ctx)=>{\n    let keys = ctx.keys();\n    let values = keys.map(ctx);\n    return keys.reduce((obj, k, i) => ({...obj, [k]: values[i] }), {})\n}","/* eslint-disable */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport Queue from 'promise-queue';\nimport ReactDOM from 'react-dom';\nimport marked from 'marked'\nimport { loadYamlFile, saveYamlFile } from '../reducers/index';\nimport { SplitButton, MenuItem, Button, ButtonToolbar, Glyphicon, DropdownButton, Collapse} from 'react-bootstrap';\nimport { sendAsFile, sendAsImage, getAsImage } from '../lib/helpers'\nimport slug from 'slug';\nimport jsPDF from 'jspdf';\nimport '../assets/fonts/din-cond/style.css';\n\nimport { resolve } from 'path';\nimport sortBy from 'sort-by'\nimport { range } from 'rxjs';\n\nconst PAGE_WIDTH=10.55;\nconst PAGE_HEIGHT=7.55;\nconst MARGIN_X=0.3;\nconst MARGIN_Y=0.3;\nconst CARD_WIDTH=5;\nconst CARD_HEIGHT=3.5;\nconst CARD_OFFSETX=0;\nconst CARD_OFFSETY=-0.03\n\nexport class FileField extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this._domclick = function (ce) {\n            ce.preventDefault();\n            let modifiers = { ctrl: ce.ctrlKey, shift: ce.shiftKey, meta: ce.metaKey };\n            if (this.input.__changeHandler) this.input.removeEventListener('change', this.input.__changeHandler)\n            this.input.value = \"\";\n            this.input.__changeHandler = (e) => {\n                e.preventDefault();\n                this.props.onChange(e, modifiers)\n            }\n            this.input.addEventListener('change', this.input.__changeHandler)\n            this.input.click();\n        }.bind(this)\n    }\n\n    componentDidMount() {\n        this.clicker.addEventListener('click', this._domclick)\n    }\n\n    componentWillUnMount() {\n        this.clicker.removeEventListener('click', this._domclick)\n    }\n\n    render() {\n        return <span style={this.props.style} >\n            <span ref={(input) => this.clicker = input}>{this.props.children}</span><input type=\"file\" ref={(input) => { this.input = input }} multiple style={{ display: \"none\" }} accept={this.props.accept} />\n        </span>\n    }\n}\n\nexport const loadCharacter = (e, action) => {\n    let self = this\n    let files = e.target.files;\n    if (!window.characterLoader)\n        window.characterLoader = new Queue(1, Infinity)\n\n    for (let file of files) {\n        window.characterLoader.add(loadYamlFile(file)).then((data) => {\n            data.forEach((obj, i) => {\n                action(obj, i)\n            }, this);\n\n        }).catch(console.error)\n    }\n}\n\nexport const downloadCharacters=(characters)=>{\n    sendAsFile(\"7TV_cast.yaml\",saveYamlFile(characters,true),'application/x-yaml')\n}\n\nexport const downloadSingleCharacter=(character)=>{\n    sendAsFile(\"7TV_cast-\"+slug(character.name||character.id)+\".yaml\",saveYamlFile(character,false),'application/x-yaml');\n}\n\nexport const downloadCharactersAsImages=(cast)=>{\n    cast.forEach(item=>{\n        sendAsImage(item.id,\"7TV_cast-\"+slug(item.name||item.id)+\".png\",{scale:2});\n    })\n}\n\nconst dottedLine=function(doc, xFrom, yFrom, xTo, yTo, segmentLength)\n{\n    // Calculate line length (c)\n    var a = Math.abs(xTo - xFrom);\n    var b = Math.abs(yTo - yFrom);\n    var c = Math.sqrt(Math.pow(a,2) + Math.pow(b,2));\n\n    // Make sure we have an odd number of line segments (drawn or blank)\n    // to fit it nicely\n    var fractions = c / segmentLength;\n    var adjustedSegmentLength = (Math.floor(fractions) % 2 === 0) ? (c / Math.ceil(fractions)) : (c / Math.floor(fractions));\n\n    // Calculate x, y deltas per segment\n    var deltaX = adjustedSegmentLength * (a / c);\n    var deltaY = adjustedSegmentLength * (b / c);\n\n    var curX = xFrom, curY = yFrom;\n    while (curX <= xTo && curY <= yTo)\n    {\n        doc.line(curX, curY, curX + deltaX, curY + deltaY);\n        curX += 2*deltaX;\n        curY += 2*deltaY;\n    }\n}\n\nconst getImageDimensions= (file) => {\n    return new Promise (function (resolved, rejected) {\n      var i = new Image()\n      i.onload = function(){\n        resolved({w: i.width, h: i.height})\n      };\n      i.src = file\n    })\n  }\n\nexport const downloadCharactersAsPDF=(cast,fileName='7TVcast',status=console.warn)=>{\n\n    \n\n    let doc = new jsPDF({orientation: 'landscape',format:[PAGE_WIDTH,PAGE_HEIGHT],unit:'in'});\n        \n        \n\n    var i=0;\n    let promises=cast.sort(sortBy('__card')).map((item)=>{\n        return new Promise((rs,rj)=>{\n            getAsImage(document.getElementById(item.id),{scale:2}).then((img)=>{\n                status(\"Processing image \"+(++i)+\"/\"+cast.length);\n                rs({dataURL: img,type:item.__card.replace(/.*_(.*)$/,'$1')})\n            });\n    })});\n    \n    \n\n    Promise.all(promises).then((items)=>{\n        chunk(items,0,(i,p)=>{return i.type!==p.type;}).forEach((c,cn)=>{ \n            let positions = cardGrid(c[0].type);\n            chunk(c,positions.length).forEach((itemsperpage,page)=>{\n                \n                status(\"Generating page \"+(page+1))\n                if (cn||page) doc.addPage();\n                itemsperpage.forEach((item,j)=>{\n                    let {dataURL,type} = item;\n                    let [fw,fh] = cardFactor(type);\n                    doc.addImage(dataURL,'JPEG',positions[j].x,positions[j].y,CARD_WIDTH*fw,CARD_HEIGHT*fh)\n                })\n                cardCuts(c[0].type,doc)\n            });\n\n\n        });\n        doc.save(fileName+'.pdf')\n        status(null)\n       \n    })\n\n}\n\nconst chunk = (r,j,fn=(i)=>{return false;}) => r.reduce((a,b,i,g) => {\n    if (!i || j&&(!(a[a.length-1].length % j)) ||  (fn(b,g[!i?i:i-1]))) a.push([])\n        a[a.length-1].push(g[i])\n    return a;\n}, []);\n\n\nconst cardGrid=function(type){\n\n    let [fw,fh] = cardFactor(type);\n\n    switch(type){\n        case 'small': \n            return Array.from(Array(8).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n        case 'large': \n            return Array.from(Array(2).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n        default: \n            return Array.from(Array(4).keys()).map((v)=>({x:(v%2)*CARD_WIDTH*fw+MARGIN_X, y: Math.floor(v/2)*CARD_HEIGHT*fh+MARGIN_Y}));\n        break;\n    }\n}\n\nconst cardCuts=function(type,doc){\n    doc.setLineWidth(0.01)\n    doc.setDrawColor(255,255,255);\n    switch(type){\n        case 'large':\n            dottedLine(doc,0,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,PAGE_WIDTH,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,0.01)\n        break;\n        default:\n            dottedLine(doc,MARGIN_X+CARD_WIDTH/2,0,MARGIN_X+CARD_WIDTH/2,PAGE_HEIGHT,0.05)\n            dottedLine(doc,MARGIN_X+CARD_WIDTH,0,MARGIN_X+CARD_WIDTH,PAGE_HEIGHT,0.01)\n            dottedLine(doc,MARGIN_X+CARD_WIDTH/2*3,0,MARGIN_X+CARD_WIDTH/2*3,PAGE_HEIGHT,0.05)\n            dottedLine(doc,0,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,PAGE_WIDTH,MARGIN_Y+CARD_HEIGHT+CARD_OFFSETY,0.01)\n        break;\n    }\n}\n\nconst cardFactor=function(type){\n    switch(type){\n        case 'small': return [1,0.5]; break;\n        case 'large': return [1,2]; break;\n        default: return [1,1];\n    }\n}\n\n\nexport const Marked = ({md=\"\", Component=\"span\", Options={},...rest})=>{\n    let __html=marked(md,Options);\n        if (Options.inline) __html=__html.replace(/^<p>/gi,'').replace(/<\\/p>[\\r\\n]*$/gi,'').replace(/[\\r\\n]/gi,'')\n    return <Component {...{...rest}} dangerouslySetInnerHTML={{__html}}/>\n}\n\n\nexport class Toolbar extends React.Component {\n    constructor(...args) {\n        super(...args);\n        this.state = {\n          status: null,\n        };\n    }\n\n    status(status){\n        this.setState({status: status? \"(\"+status+\")\":''}); \n        this.forceUpdate();\n    }\n\n    render(){\n\n        return <div className=\"ui paper editorToolBar\">\n                <h2 className=\"din\" style={{textAlign:\"center\", marginBottom:0}}>7TV Studios</h2>\n                <h5 className=\"din\" style={{textAlign:\"center\", marginTop:0}}> casting agency</h5>\n               <div style={{margin:5}}>\n               <DropdownButton bsStyle=\"primary\" bsSize=\"small\" title=\"New\"  id=\"new_model\" >\n                <MenuItem eventKey=\"1\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW' })}>Character</MenuItem>\n                <MenuItem eventKey=\"2\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'vehicle'} })}>Vehicle</MenuItem>\n                <MenuItem eventKey=\"3\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'vehicle_large'} })}>Extended Vehicle</MenuItem>\n                <MenuItem eventKey=\"4\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'unit'} })}>Unit</MenuItem>\n                <hr/>\n                <MenuItem eventKey=\"5\" onClick={e=>this.props.dispatch({ type: 'CHARACTER_NEW', payload:{ __card:'gadget_small'} })}>Gadget</MenuItem>\n               </DropdownButton>\n              \n                \n                <FileField style={{display:\"block\",margin: \"5px 0 5px 0\"}} accept=\".yaml\" onChange={e => loadCharacter(e, (file) => this.props.dispatch({ type: 'CHARACTER_LOAD', payload: file }))}><Button block  bsSize=\"small\" bsStyle=\"success\"><Glyphicon glyph=\"upload\" /> Load .Yaml</Button></FileField>\n                \n                <Button block bsSize=\"small\" onClick={e=>downloadCharacters(this.props.cast)} bsStyle=\"warning\"><Glyphicon glyph=\"download\" /> Download as .Yaml</Button>\n                <Button block bsSize=\"small\" onClick={e=>downloadCharactersAsImages(this.props.cast)} bsStyle=\"danger\"><Glyphicon glyph=\"download\" /> Download as Single Images</Button>\n                <Button block bsSize=\"small\" onClick={e=>downloadCharactersAsPDF(this.props.cast, null,this.status.bind(this))} bsStyle=\"danger\"><Glyphicon glyph=\"download\" /> Download as PDF {this.state.status}</Button>\n                <Button block bsSize=\"small\" onClick={e=> {if (confirm('Are you sure? This will wipe all the current cards! It is a bloody nuke!')) this.props.dispatch({type: 'CAST_CLEAR'});}} bsStyle=\"info\"><Glyphicon glyph=\"trash\" /> Reset all</Button>\n               </div>\n            \n        </div>\n    }\n}\n\nToolbar = connect(\n    (state)=>{return {cast: state.cast}}\n)(Toolbar);\n\n\nexport class Help extends React.Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n          open: false,\n        };\n    }\n\n    render(){\n        return <div className=\"ui paper\" style={{margin:5}} >\n\n       \n        <Button block bsSize=\"small\" onClick={() => this.setState({ open: !this.state.open })} bsStyle=\"default\">Help</Button>\n        <Collapse in={this.state.open}><div className=\"help\" dangerouslySetInnerHTML={{__html:marked(require(\"!raw-loader!../HELP.md\"))}} ></div></Collapse>\n\n\n      </div>\n    }\n}\n\nconst downloadSnapshot=function(state)\n{\n    let d=new Date();\n    sendAsFile(\"7TV-debug-\"+d+\".json\",JSON.stringify(state),'application/json');\n}\n\n\nexport class Rescue extends React.Component {\n    render(){\n        return <div className=\"ui paper\"> <DropdownButton bsStyle=\"primary\" bsSize=\"xsmall\" title=\"Debug\"  id=\"new_model\" dropup >\n            <MenuItem eventKey=\"1\" onClick={e=>downloadSnapshot(this.props.state)}>Download data snapshot</MenuItem>\n       </DropdownButton></div>\n    }\n}\n\nRescue = connect((state)=>({state}))(Rescue);","/* eslint-disable */\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { connect } from 'react-redux'\nimport { DropdownButton, MenuItem} from 'react-bootstrap';\nimport slug from 'slug';\nimport '../assets/fonts/din-cond/style.css';\nimport '../assets/fonts/veneer3/style.css';\nimport '../assets/card.scss'\nimport { sendAsFile, sendAsImage } from '../lib/helpers'\nimport Yaml from \"js-yaml\"\n\nimport {T,zip} from '../index'\n\n\n\nimport { downloadSingleCharacter, Marked } from './Ui'\nimport { isString } from 'util';\n\n\n\nconst stats = { fight: 10, shoot: 10, defence: 10, mind: 10, body: 10, spirit: 10 };\n\n\n\nconst StatBlock = ({ stats, className=\"\", zero='0', ...rest }) => {\n    return <div className={\"stats \" + className}>\n        {Object.entries(stats).map((entry, i) => {\n            let [key, value] = entry;\n            return <div key={i} className={key}><div>{key}</div><div><var>{(value)?value:zero}</var></div></div>\n        })}\n    </div>\n}\n\nconst Pic = ({ photo, className, ...rest }) => {\n    let style=photo? {backgroundImage: \"url(\"+photo+\")\"}:{};\n    return <div className={['pic',className].join(\" \")} style={style} />\n}\n\n\n\nconst Weapons = ({ items }) => {\n\n    let colspan=items.length? Object.keys(items[0].effects).length : 1\n\n    return <table className=\"weapons\">\n        <thead><tr><td rowSpan=\"2\" className=\"attack\">Attack</td><td  className=\"range\" rowSpan=\"2\">Range</td><td rowSpan=\"2\" className=\"strike\">Strike</td><td className=\"effects\" colSpan={colspan}>Effects</td></tr>\n                { (items.length && typeof items[0].effects =='object') ? (<tr>{ Object.keys(items[0].effects).map((key,i)=>{ return <td key={i} className={key}>{key}</td>})}</tr>) : undefined }\n            </thead>\n        <tbody>\n            {items.map((item, i) => {\n                let effects=isString(item.effects)? {effects: item.effects} : item.effects;\n                return <tr className={slug(item.type||\"\").toLowerCase()} key={i}>\n                    <td className=\"attack\" dangerouslySetInnerHTML={item.attack.length? {__html:item.attack}:{__html:\"&nbsp;\"}}></td><td className=\"range\">{item.range}</td><td className=\"strike\">+{item.strike}</td>\n                    { Object.entries(effects).map((entry,i)=>{\n                        let [key,value] = entry;\n                        return <Marked key={i} Component='td' className={key} md={value} Options={{inline:true}}/>\n\n                    }) }\n                    \n                </tr>\n            })}\n        </tbody>\n    </table>\n}\n\nclass ModsTable extends React.Component {\n    \n    constructor(props){\n        super(props);\n        this.state={mods:{}}\n    }\n    componentDidMount()\n    {\n        fetch(require('../data/mods.yaml')).then((response)=>{\n            response.text().then(function(txt){\n                this.setState({mods: Yaml.safeLoad(txt)||{}});\n            }.bind(this))\n        })\n    }\n\n    classify(){\n        let list = {}\n\n        if (typeof this.props.character.type=='object' ){\n            let [name,ratings] =  Object.entries(this.props.character.type)[0]\n            list['vehicle']=[{ratings, name}];\n        }\n        this.props.character.mods.forEach((item)=>{\n            if (list[item.location]==undefined)\n                list[item.location]=[];\n            list[item.location].push(item);\n        })\n        return list\n    }\n\n    render(){\n        return <div className=\"mods\">{Object.entries(this.classify()).map((entry,i)=>{\n            return <table key={i}><thead><tr><th>{entry[0]}<CheckRibbon className={entry[0].toLowerCase()}   stat={this.props.character.stats[entry[0].toLowerCase()]}/></th><td>Ratings</td></tr></thead><tbody>\n            {entry[1].map((mod,j)=>{\n                let indent=(/^([ ]+)/gi.exec(mod.name))\n                return <tr key={j} className={mod.mounted?\"mounted\":\"\"}><td className={[\"name\",indent?\"indent\":\"\"].join(\" \")}>{mod.name.replace(/^[ ]*/gi,'')}</td><td className=\"ratings\">{mod.ratings}</td></tr>\n            })}\n            </tbody></table>\n        })}</div>\n    }\n}\n\n\n\nconst Ratings = ({ value }) => {\n    return <div className=\"ratings\"><strong><val>{value}</val> RATINGS</strong></div>\n}\n\n\nconst Trait = ({ object, full }) => {\n    let { cost, name, level, description } = object\n    let stars = cost ? Array(cost).fill(\"\").map((v, i) => { return <i key={i} className=\"icon-star_icon\"></i> }) : undefined\n    if (full) {\n        return <p><strong><Marked md={name} Options={{inline:true}}/>{level ? ` (${level})` : ''}{stars ? \" \" : \"\"}{stars}</strong><br /><Marked md={description}/></p>\n        \n    }\n    return <span>{name}{level ? ` (${level})` : ''}{stars ? \" \" : \"\"}{stars}</span>\n}\n\nconst Description = ({text}) =>{\n    return <p className=\"description\"><Marked md={text}/></p>\n}\n\nconst Title = ({ name=\"\", alignment=\"\", type=\"\" }) => {\n    let _type = typeof type == 'object'? Object.keys(type)[0] : type;\n    return <div className=\"title\"><strong>{name}</strong> <i className={_type.toLowerCase()} /> <span>{alignment} {_type}</span></div>\n}\n\nconst Tags = ({ values, additional=[] }) => {\n    return <div className=\"tags\">{values.map((v, i) => { \n        return <i key={i} className={\"icon-\" + slug(v||\"\").toLowerCase()}></i> \n    })}{(additional||[]).map((v,i)=>{\n        return <img key={i+values.length} src={v} /> \n    })}</div>\n}\n\nconst CheckRibbon = ({stat, className})=>{\n    let slots = Array(Number(stat||0)).fill(\"\").map((v, i) => { return <div key={i}></div> })\n    return <div className={[\"checkribbon\",className].join(' ')}>{slots}</div>\n}\n\nexport class CardFront extends React.Component {\n    render() {\n        const card = (this.props.character.__card||\"Model\").toLowerCase()\n        const theme = (this.props.character.__theme||\"core\").toLowerCase()\n        switch(card) {\n            case \"vehicle\":\n                return this.renderVehicle(card,theme)\n            break;\n            case \"vehicle_large\":\n                return this.renderVehicleLarge(card,theme)\n            break;\n            case \"unit\":\n                return this.renderUnit(card,theme)\n            break;\n            case \"gadget_small\":\n                return this.renderGadget(card)\n            break;\n            default:\n                return this.renderModel(card,theme)\n            break;\n        }\n    }\n\n    renderVehicle(card,theme)\n    {\n        let { health=0, ratings=0,name, type, photo, description=\"\",weapons=[], __custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let __genres= __custom ? __custom.genres: null\n        let tags = this.props.character.genres||[]\n        let sfx = this.props.character.special_effects || [];\n        let { capacity=0, armour=0, defence=0 } = this.props.character.stats;\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\"].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name} type={type} />\n            <Pic photo={photo}/>\n            <StatBlock stats={{ capacity, armour, defence }} />\n            {weapons.length? <Weapons items={weapons} />:<Description text={description}/>}\n            <div className=\"sfxribbon\">\n                <dl><dt>Special effects</dt><dd>{sfx.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n            </div>\n            <Ratings value={ratings} />\n            <CheckRibbon stat={health} className=\"health\" />\n            <Tags values={tags} additional={__genres} />\n        </div>\n        </div></div>\n    }\n\n    renderVehicleLarge(card,theme)\n    {\n        let { health=0,  name,   photo, description=\"\",weapons=[], __custom,ratings, type } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let __genres= __custom ? __custom.genres: null\n        let tags = this.props.character.genres||[]\n        let sfx = this.props.character.special_effects || [];\n        let { move=0, defence=0, armour=0, capacity=0, hood=0, body=0, engine=0, trunk=0, chassis=0 } = this.props.character.stats;\n        let vehicle=Object.keys(type)[0].toLowerCase();\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name}/>\n            <Pic className={vehicle} photo={photo}/>\n            <div className=\"contentblock\">\n            <StatBlock stats={{move, armour, defence, capacity }} zero=\"-\" />\n            {weapons.length? <Weapons items={weapons} />:<Description text={description}/>}\n            <StatBlock className=\"gear\" stats={{parked:\"parked\",slow:\"slow\",fast:\"fast\",reverse:\"reverse\"}} />\n            </div>\n             <CheckRibbon className=\"health\"   stat={health}/>\n            <Ratings value={ratings} />\n        </div>\n        </div></div>\n    }\n\n    renderUnit(card,theme)\n    {\n        let {__custom} = this.props.character;\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\"></div>\n        </div></div>\n    }\n\n    renderModel(card,theme) {\n        let { fight = 0, shoot = 0, defence = 0, mind = 0, body = 0, spirit = 0 } = this.props.character.stats;\n        let { health, ratings, weapons, name, role, type, photo, __custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let tags = this.props.character.genres || []\n        let __genres= __custom ? __custom.genres: null\n        \n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"front\",].join(' ')}>\n             <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\" >\n            <Title name={name} alignment={T(role)} type={type} />\n            <Pic photo={photo}/>\n            <StatBlock className=\"left\" stats={{ fight, shoot, defence }} />\n            <StatBlock className=\"right\" stats={{ mind, body, spirit }} />\n            <div className=\"sfxribbon\">\n                <dl><dt>Star quality</dt><dd>{qlty.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n                <dl><dt>Special effects</dt><dd>{sfx.map((s, i) => (<Trait key={i} object={s} />))}</dd></dl>\n            </div>\n            <Weapons items={weapons} />\n            <Ratings value={ratings} />\n            <CheckRibbon stat={health} className=\"health\" />\n            <Tags values={tags} additional={__genres} />\n            </div>\n        </div></div>\n    }\n\n    renderGadget(card, theme){\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let { health, ratings, weapons, name, role, type, notes='',__custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[\"card\",card,\"front\",theme].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\" ></div>\n        </div></div>\n    }\n    \n}\n\nexport class CardBack extends React.Component {\n\n    render() {\n        const card = (this.props.character.__card||\"Model\").toLowerCase()\n        const theme = (this.props.character.__theme||\"core\").toLowerCase()\n        switch(card) {\n            case \"vehicle_large\":\n                return this.renderVehicleLarge(card,theme);\n            break;\n            case \"vehicle\":\n                return this.renderVehicle(card,theme)\n            break;\n            case \"unit\":\n                return this.renderUnit(card,theme)\n            break;\n            case \"gadget_small\":\n                return this.renderGadget(card,theme)\n            break;\n            default:\n                return this.renderModel(card,theme)\n            break;\n        }\n    }\n    renderVehicle(card,theme){\n        let sfx = this.props.character.special_effects||[];\n        let {name, type=\"\",notes=\"\",weapons=[], description=\"\", __custom} = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name} type={type} />\n            <section>\n                {weapons.length && description? (<heading>Description</heading>):undefined}\n                {weapons.length && description? (<Description text={description}/>):undefined}\n                {sfx.length? (<heading>Special effects</heading>):undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes? (<heading>Notes</heading>):undefined}\n                <p>{notes}</p>\n            </section>\n            \n        </div>\n        </div></div>\n    }\n\n    renderVehicleLarge(card,theme){\n        let sfx = this.props.character.special_effects||[];\n        let {\n            name, type=\"\",notes=\"\",weapons=[], description=\"\", __custom, ratings, photo,\n            hood, trunk, body, chassis, engine\n            } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let vehicle=Object.keys(type)[0].toLowerCase();\n\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n        <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n        <div className=\"foreground\">\n            <Title name={name}  />\n            <Pic className={vehicle} photo={photo}/>\n            <section>\n                {weapons.length && description? (<heading>Description</heading>):undefined}\n                {weapons.length && description? (<Description text={description}/>):undefined}\n                {sfx.length? (<heading>Special effects</heading>):undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes? (<heading>Notes</heading>):undefined}\n                <p>{notes}</p>\n            </section>\n            <ModsTable character={this.props.character}/>\n            \n            <div className=\"totalratings\">{T('Total Vehicle Ratings')} <Ratings value={ratings} /></div>\n        </div>\n        </div></div>\n    }\n\n    renderUnit(card,theme) {\n        let {name, role, type=\"\",notes=\"\",models=[], description=\"\", photo, __custom} = this.props.character\n        let __tint = __custom? __custom.tint : 0\n        let tags = this.props.character.genres || []\n        let __genres= __custom ? __custom.genres: null\n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name} alignment={T(role)} type={type} />\n            <Tags values={tags} additional={__genres} />\n            <div className=\"content\">\n                <Description text={description}/>\n                {models.map((m,i)=>{return <dl className=\"model\" key={i}><dt>{m.qty}</dt><dd>{m.model}</dd></dl>})}\n                <Pic photo={photo}/>\n            </div>\n            </div>\n        </div></div>\n    }\n\n    renderModel(card,theme) {\n        let qlty = this.props.character.star_quality\n        let sfx = this.props.character.special_effects;\n        let { health, ratings, weapons, name, role, type, notes='',__custom } = this.props.character\n        let __tint = __custom? __custom.tint : 0\n\n       \n        return <div className=\"cellophan\"><div className={[theme,\"card\",card,\"back\",].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name} alignment={T(role)} type={type} />\n\n            <section>\n                {qlty.length? <heading>Star quality</heading> :undefined} \n                {qlty.map((v, i) => (<Trait key={i} object={v} full />))}\n                {sfx.length? <heading>Special effects</heading> : undefined}\n                {sfx.map((v, i) => (<Trait key={i} object={v} full />))}\n                {notes && (<heading>Notes</heading>)}\n                <p>{notes}</p>\n            </section>\n            </div>\n        </div></div>\n    }\n\n    renderGadget(card,theme){\n        let { name, play, weapon, cost, description,__custom } = this.props.character\n        \n        let strike = (weapon.length)?weapon[0].strike:''\n        let range = (weapon.length)?weapon[0].range:''\n\n        let __tint = __custom? __custom.tint : 0\n\n        let stars = cost ? Array(cost).fill(\"\").map((v, i) => { return <i key={i} className=\"icon-star_icon\"></i> }) : \"Free\"\n\n        let stats = zip(Object.entries({play, cost:stars, range, strike}).filter((i)=>{ \n            let [key,value] = i; \n            return String(value!==undefined? value:\"\").length\n        }))\n\n        return <div className=\"cellophan\"><div className={[\"card\",card,\"back\",theme].join(' ')}>\n            <div className=\"background\" style={{filter:`hue-rotate(${__tint}deg)`}}></div>\n            <div className=\"foreground\">\n            <Title name={name}  />\n            <section className=\"content\">\n                <StatBlock stats={{ ...stats }} />\n                <Description text={description}/>\n            </section>\n            </div>\n        </div></div>\n    }\n}\n\n\n\nexport class Card extends React.Component {\n    render() {\n        let id = this.props.character.id;\n        let r = /_(large|small)$/gi.exec(this.props.character.__card);\n        let cardsize = r? r[1]:'standard'\n        return (<div \n            className={[\"viewport\",((id == this.props.currentCharacter)?\"selected\":null),cardsize].join(\" \")}\n            onClick={e =>  {e.stopPropagation(); this.props.dispatch({ type: 'CHARACTER_SELECT', payload: { id } })}}\n         >\n            <div  id={id}  >\n            <CardFront character={this.props.character} />\n            <CardBack character={this.props.character} />\n            </div>\n            <div className=\"ui paper\" style={{position:\"absolute\", right:0}}>\n\n            <DropdownButton bsSize=\"xsmall\" title=\"\" bsStyle=\"warning\" id={\"ddb-\"+id} >\n            <MenuItem eventKey=\"1\" onClick={e => {this.props.dispatch({ type: 'CHARACTER_REMOVE', payload: { id } })}}>Remove</MenuItem>\n            <MenuItem eventKey=\"2\" onClick={e => { downloadSingleCharacter(this.props.character)}}>Download</MenuItem>\n            <MenuItem eventKey=\"3\" onClick={e => { sendAsImage(id, \"7TV_cast-\"+slug(this.props.character.name||this.props.character.id)+\".png\",{scale:2})}}>Download as Single Image</MenuItem>\n            <MenuItem eventKey=\"4\" onClick={e => { sendAsImage(id, \"7TV_cast-\"+slug(this.props.character.name||this.props.character.id)+\"_{n}.png\",{scale:2, selector:'.cellophan'})}}>Download as Separate Images</MenuItem>\n            </DropdownButton></div></div>)\n    }\n}\n\nCard = connect((state)=>{\n    return { currentCharacter: state.currentCharacter}\n})(Card);","/* eslint-disable */\nimport React from 'react';\nimport PropTypes from \"prop-types\";\nimport { DescriptionField } from \"react-jsonschema-form\";\nimport TextAreaWidget from \"react-jsonschema-form/lib/components/widgets/TextareaWidget\";\nimport ColorWidget from \"react-jsonschema-form/lib/components/widgets/ColorWidget\";\nimport FileWidget from \"react-jsonschema-form/lib/components/widgets/FileWidget\";\nimport TitleField  from \"react-jsonschema-form/lib/components/fields/TitleField\";\nimport ObjectField  from \"react-jsonschema-form/lib/components/fields/ObjectField\";\nimport ArrayField  from \"react-jsonschema-form/lib/components/fields/ArrayField\";\n\nimport { ButtonGroup, Button, Glyphicon, Collapse, Checkbox,  FormGroup, InputGroup, FormControl } from \"react-bootstrap\";\nimport { insertAtCaret } from '../lib/helpers'\nimport format from 'string-template'\nimport { sendAsFile, parseDataUri } from '../lib/helpers'\n\nimport ReactCrop, { makeAspectCrop } from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { SelectField } from 'material-ui';\n\nconst addNameToDataURL=(dataURL, name) => {\n  return dataURL.replace(\";base64\", `;name=${name};base64`);\n}\n\nconst getCroppedImg = (src, pixelCrop, fileName) => {\n \n  return new Promise((resolve,reject)=>{\n    const canvas = document.createElement('canvas');\n        canvas.width = pixelCrop.width;\n        canvas.height = pixelCrop.height;\n    const ctx = canvas.getContext('2d');\n    const image=new Image();\n          image.onload=function(){\n            \n            ctx.drawImage(\n              image,\n              pixelCrop.x,\n              pixelCrop.y,\n              pixelCrop.width,\n              pixelCrop.height,\n              0,\n              0,\n              pixelCrop.width,\n              pixelCrop.height\n            );\n            \n            resolve(addNameToDataURL(canvas.toDataURL('image/jpeg'),fileName))\n          }\n\n          image.src=src\n      })\n        \n}\n\nconst textToolsWidgets={\n  ToolInsertText:function(options,widget){\n    let insert=(text)=>{\n      let node=document.getElementById(widget.id);\n      insertAtCaret(node,text)\n      widget.onChange(node.value)\n    }\n    return (props)=>{\n      return <ButtonGroup bsSize=\"xsmall\">{options.map((text,i)=>{ \n        return <Button bsStyle=\"info\" key={i} onClick={e=>insert(text)}>Insert {text}</Button>})\n        }</ButtonGroup>\n    }\n  }\n}\n\nconst parseTextTools=(textTools,props)=>{\n    return Object.entries(textTools).map((entry, i)=>{\n      let [cmp, options] = entry;\n      let Fcmp=textToolsWidgets[cmp](options, props);\n      return <Fcmp key={i} />\n    })\n}\n\nexport function ToolTextareaWidget(props) {\n  const { options } =props\n  return (\n    <div>\n      {parseTextTools(options.textTools,{...props})}\n      <TextAreaWidget {...props}/>\n    </div>)\n}\n\nexport class PictureWidget extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={value:\"\", errorSchema:undefined, crop:{aspect:1}};\n    this.uploadHandler=this.uploadHandler.bind(this)\n    this.cropHandler=this.cropHandler.bind(this)\n    this.updateHandler=this.updateHandler.bind(this)\n    this.removeHandler=this.removeHandler.bind(this)\n  }\n\n  uploadHandler(value,errorSchema){\n    value=value.replace(/name=([^;]+);/gi,(str,p1)=>{return 'name='+encodeURIComponent(p1)+\";\"})\n    this.setState({value, errorSchema})\n    this.props.onChange(value,errorSchema);\n  }\n  cropHandler(crop,pixelCrop,fileName){\n    this.setState({crop, pixelCrop,fileName})\n  }\n  updateHandler(){\n    if (confirm(\"No Way Back!\")){\n      getCroppedImg(this.props.value, this.state.pixelCrop, this.state.fileName ).then((src)=>{\n        this.props.onChange(src,this.state.errorSchema);\n        this.setState({crop:{aspect:1}})\n      })\n    }\n  }\n\n  removeHandler(){\n    this.props.onChange(undefined);\n  }\n\n  render(){\n    \n    const {name, data, mime} = parseDataUri(this.props.value);\n    let fileprops={...this.props, onChange: this.uploadHandler}\n    return <div className=\"pictureWidget\">\n    <small>Drag to make a crop Marquee</small><br/>\n    <ReactCrop src={this.props.value||\"\"} crop={this.state.crop} onChange={(crop, pixelCrop)=>this.cropHandler(crop, pixelCrop,name)}/>\n    <br/>\n    <Button onClick={this.updateHandler} bsSize=\"xsmall\" bsStyle=\"danger\" disabled={!!!this.props.value}><Glyphicon glyph=\"pencil\"/> Crop</Button>\n    <Button onClick={e=>{sendAsFile(decodeURIComponent(name),data,mime)}} bsSize=\"xsmall\"  bsStyle=\"info\" disabled={!!!this.props.value}><Glyphicon glyph=\"download\"/> Download</Button>\n    <Button onClick={this.removeHandler} bsSize=\"xsmall\"  bsStyle=\"warning\" disabled={!!!this.props.value}><Glyphicon glyph=\"remove\"/> Remove</Button>\n    <hr/>\n    <FileWidget {...fileprops}/>\n    </div>\n  }\n}\n\nconst parseTools=(options,props)=>{\n  console.log(props)\n}\n\nexport function ToolArrayField(children) {\n  return (props)=>{\n    return <div><ArrayField {...props}/>{children.map((c,i)=>(React.cloneElement(c,{key:i, widget:props})))}</div>\n  }\n}\n\n\nexport const CollapseObjectField = function (props) {\n  let str=format(((props.uiSchema['ui:options']||{})['template'])||\"\",props.formData)\n  return <details>\n            <summary>{str}</summary>\n            <ObjectField {...props}/>\n          </details>\n};\n\nexport class ObjectSelectField extends React.Component {\n  constructor(props) {\n    /*\n    schema: The JSON schema for this field;\n    uiSchema: The uiSchema for this field;\n    idSchema: The tree of unique ids for every child field;\n    formData: The data for this field;\n    errorSchema: The tree of errors for this field and its children;\n    registry: A registry object (read next).\n    formContext: A formContext object (read next next).\n    */\n    super(props);\n    this.state = {value: props.formData};\n    this.options = props.schema.enum;\n    \n  }\n\n  onChange(e) {\n    this.setState({value: JSON.parse(e.target.value)},()=>{this.props.onChange(this.state.value)})\n  }\n\n  render() {\n    let props=this.props\n\n     \n      let widget=<select onChange={(e)=>{this.onChange(e)}} className=\"form-control\" id={props.idSchema.$id} value={JSON.stringify(this.state.value)}>\n        {this.options.map((option,i)=>{ return <option key={i} value={JSON.stringify(option)} >{Object.keys(option)[0]}</option> })}\n        </select>\n     \n\n    return (\n\n      <div>\n      {(props.uiSchema[\"ui:title\"] || props.schema.title) && (\n        <label id={`${props.idSchema.$id}__title`}>\n          {props.schema.title || props.uiSchema[\"ui:title\"]}\n        </label>\n      )}\n      {props.description && (\n        <DescriptionField\n          id={`${props.idSchema.$id}__description`}\n          description={props.schema.description}\n          formContext={props.formContext}\n        />\n      )}\n      {widget}\n    </div>\n      \n    );\n  }\n}\n  ","/* eslint-disable */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport {Accordion, Panel,Button, FormControl, FormGroup, InputGroup, Label } from 'react-bootstrap'\nimport Yaml from 'js-yaml';\nimport { readContext } from '../lib/helpers'\nimport { Marked } from './Ui'\nimport Holdable from 'react-holdable'\nimport UnsupportedField from '../../node_modules/react-jsonschema-form/lib/components/fields/UnsupportedField';\nimport uuid from 'uuid';\nimport dotProp from 'dot-prop';\n\nconst parseTrait=(label,text)=>{\n    let trait={}\n    if (typeof text === 'string') {\n        trait.description=text\n    } else {\n        trait=Object.assign({},text)\n    }\n    trait.cost=trait.cost || 0\n    if (!trait.name) trait.name=label\n    return trait;\n} \n\nclass TraitSelect extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.handleClick=this.handleClick.bind(this)\n        this.state={\n            data: {},\n            value:null\n        }\n        this.placeholder=\"Select item to add\"\n        \n    }\n\n    handleClick(e){\n        if (!this.state.value) return;\n        let formData=this.props.widget.formData;\n        this.props.widget.onChange([...formData,this.state.value],{ validate: false })\n    }\n\n    groupFilter(i){\n        return true;\n    }\n    traitFilter(i){\n        return true;\n    }\n    \n    render(){\n        return <FormGroup>\n                <InputGroup><FormControl componentClass=\"select\" placeholder={this.placeholder} defaultValue=\"\" onChange={e=>{this.setState(Object.assign(this.state,{value:JSON.parse(e.target.value)}))}}>\n            <option>{this.placeholder}</option>\n            {Object.entries(this.state.data).filter(this.groupFilter.bind(this)).map((entry,i)=>{\n                let [group,item]=entry;\n                return <optgroup key={i} label={group}>{Object.entries(item).filter(this.traitFilter.bind(this)).map((sfx_entry,j)=>{\n                    let [label,value]=sfx_entry;\n                    return <option key={j} value={JSON.stringify(parseTrait(label, value))}>{label}</option>\n                })}</optgroup>\n            })}\n        </FormControl><InputGroup.Button><Button bsStyle=\"success\" onClick={e=>{this.handleClick(e)}}>Add</Button></InputGroup.Button></InputGroup></FormGroup>\n    }\n}\n\nexport class SFXSelect extends TraitSelect {\n    \n    componentDidMount()\n    {\n        this.placeholder=\"Select SFX to add\"\n\n        fetch(require('../data/sfx.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)})}.bind(this))\n        })\n    }\n}\n\nSFXSelect=connect((state)=>({currentCharacter: state.currentCharacter}))(SFXSelect)\n\nexport class SQSelect extends TraitSelect {\n\n    componentDidMount()\n    {\n\n        this.placeholder=\"Select Star quality to add\"\n\n        fetch(require('../data/sfx-sq.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)})}.bind(this))\n        })\n    }\n    \n}\n\nSQSelect=connect((state)=>({currentCharacter: state.currentCharacter}))(SQSelect)\n\nexport class ModSelect extends TraitSelect {\n    componentDidMount()\n    {\n        this.placeholder=\"Select Mod to add\"\n        fetch(require('../data/mods.yaml')).then((response)=>{\n            response.text().then(function(txt){this.setState({data:Yaml.safeLoad(txt)||{}})}.bind(this))\n        })\n    }\n\n    groupFilter(i) {\n        let type=null\n        if (type=dotProp.get(this.props.widget.formContext,\"type\",null)){\n            type=Object.keys(type)[0];\n            return i[0].search(new RegExp(\"^\"+type,\"gi\"))>-1;\n        }\n        return true;\n    }\n\n    \n}\n\nModSelect=connect((state)=>({currentCharacter: state.currentCharacter }))(ModSelect)\n\nexport const PROFILES=readContext(require.context('../data/casts', true))\n\nexport class ProfileSelector extends React.Component {\n    \n    constructor(props){\n        super(props)\n        this.state={\n            casting:{},\n            selected: null,\n            character:null\n        }\n    }\n\n    componentDidMount()\n    {\n        Object.entries(PROFILES).forEach(([file,path])=>{\n\n        fetch(path).then((response)=>{\n                response.text().then(function(txt){ \n                    let data={}\n                    Yaml.safeLoadAll(txt).forEach(item=>{\n                        data[item.name]=item;\n                    })\n                    this.setState({...this.state, casting: {...this.state.casting,[file.replace(/(^\\.\\/)|(\\.yaml$)/gi,'').replace(/_/gi,\" \")]:data}})\n                }.bind(this))\n            })\n        })\n\n     \n    }\n    /*  */\n    render(){\n        let cast;\n        let select = (item)=>{\n            let [selected, character] = item;\n            if (this.state.selected && (selected==this.state.selected)){\n                selected=null;\n                character=null;\n            }\n            \n            this.setState(Object.assign(this.state,{selected,character}))\n        }\n\n        let create = (item) =>{\n            let [selected, character] = item;\n            fromTemplate(character)\n        }\n\n        if (this.state.casting){\n            cast=(<Accordion>{Object.entries(this.state.casting).map((entry, i)=>{\n                let [key, chr] = entry;\n                return <Panel header={key} eventKey={i} key={i}><div className=\"listing\">\n                    {Object.entries(chr).map(\n                        (item,j)=>{\n                            let [name,char] = item;\n                            return <Holdable key={uuid.v4()} \n                                onHoldComplete={e=>{create(item)}} \n                                onClickComplete={e=>{select(item)}} \n                            ><MiniCard character={item} key={j} selected={this.state.selected && (this.state.selected===name)} /></Holdable>\n                        }\n                    )}\n                </div></Panel>\n            })}</Accordion>)\n            \n        }\n\n        const fromTemplate=(item=null)=>{\n            if (!item) \n                item=this.state.character\n            this.props.dispatch({\n                type:'CHARACTER_NEW', \n                payload: Object.assign({},item,{name: item.name, profile: item.name})\n            });\n        }\n\n        return <div className=\"profileSelector\">\n            <h4>Select a character or Create new</h4>\n            {cast}\n            <Button onClick={e=>fromTemplate()} bsStyle=\"primary\" block disabled={!this.state.selected}>New from template</Button>\n        </div>\n    }\n}\n\nProfileSelector=connect()(ProfileSelector)\n    \nexport class MiniCard extends React.Component {\n    render(){\n        let [name, item] = this.props.character;\n        return <dl className={\"miniCard \"+((this.props.selected)?'selected':'')} onClick={this.props.onClick}>\n            <dt>{name} {item.ratings? `(${item.ratings})`:''} {item.__card? '':<Label>Incomplete</Label>}</dt>\n            <dd><Marked md={item.description}/></dd>\n        </dl>\n    }\n}","/* eslint-disable */\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from 'react-bootstrap'\n\nimport Form, {DescriptionField} from \"react-jsonschema-form\";\n\nimport '../assets/bootstrap/css/paper.min.css'\nimport '../assets/editor.css'\n\n\nimport { dataURItoBlob } from '../lib/helpers'\nimport { ToolTextareaWidget , ToolArrayField, CollapseObjectField, PictureWidget, PickColorWidget, ObjectSelectField} from './FormWidgets'\nimport { SFXSelect, SQSelect, ModSelect, ProfileSelector, MiniCard} from './CharacterWidgets'\n\nconst getCharacterById=(id, cast)=>{\n    return cast.find(item=>{return item.id == id})\n}\n\nconst applyToProps=(dict,props,value)=>{\n    return Object.assign(dict,\n        props.reduce((obj,item)=>{obj[item]=value;return obj;},{})\n    );\n}\n\nconst diff=(arr1,arr2)=>{\n    return arr2.filter(function(i) {return arr1.indexOf(i) < 0;});\n}\n\nconst log = (type) => console.log.bind(console, type);\n\n\nconst SfxArrayField=ToolArrayField([<SFXSelect/>])\nconst SQArrayField=ToolArrayField([<SQSelect/>])\nconst ModArrayField=ToolArrayField([<ModSelect/>])\n\nexport class CharacterEditor extends React.Component {\n    \n    constructor(props){\n        super(props);\n        this.handleChange=this.handleChange.bind(this)\n    }\n\n    handleChange(data){\n        if (this.props.onChange)\n            this.props.onChange(data)\n    }\n\n    render(){\n        let character=getCharacterById(this.props.characterId, this.props.cast);\n\n        if (!character) \n            return <div className=\"paper characterEditor\"><div style={{margin:20}}><ProfileSelector/></div></div>;\n\n        const card=character.__card.toLowerCase();\n        const sch=require('../data/'+card+'-uischema.json')\n        const uiSchema=applyToProps(sch,[...diff(sch['ui:order'],Object.keys(character)),'__card','__version','id'],{'ui:widget':'hidden'})\n        const schema = require('../data/'+card+'-schema.json');\n\n        const widgets={\n            toolTextareaWidget:ToolTextareaWidget,\n            pictureWidget:PictureWidget,\n        }\n        const fields={\n            collapseObjectField:CollapseObjectField,\n            sfxArrayField:SfxArrayField,\n            sqArrayField:SQArrayField,\n            modArrayField:ModArrayField,\n            objectSelectField:ObjectSelectField\n        }\n        return <div className=\"paper characterEditor\">\n            <div style={{margin:20}}>\n            <Form schema={schema}\n                onChange={this.handleChange}\n                onSubmit={log(\"submitted\")}\n                onError={log(\"errors\")}\n                uiSchema={uiSchema}\n                liveValidate\n                formData = {character}\n                formContext = {character}\n                widgets={widgets}\n                fields={fields}\n                ><Button bsStyle=\"danger\" block type=\"submit\">Validate</Button></Form>\n                </div>\n        </div>\n    }\n}\n\n\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { Card } from './Card'\nimport { Toolbar, Help, Rescue } from './Ui'\nimport { CharacterEditor } from './CharacterEditor'\nimport SplitPane from 'react-split-pane'\nimport '../assets/resizer.css'\n\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <SplitPane split=\"vertical\" minSize={300} \n              defaultSize={ parseInt(localStorage.getItem('splitPos')||300, 10) }\n              onChange={ size => localStorage.setItem('splitPos', size) }>\n          \n          <div className=\"sidebar ui \" >\n            <Toolbar/>\n            <Help/>\n            <CharacterEditor \n              characterId={this.props.currentCharacter} \n              cast={this.props.cast}\n              onChange={this.props.updateCharacter}\n            />\n            <Rescue/>\n          </div>\n          <div className=\"canvas\" onClick={e=>this.props.deselectCharacter(e)}>{\n            this.props.cast.map((character,j)=>{return <Card character={character} key={j}/>})\n          }</div>\n        </SplitPane>\n      </div>\n    );\n  }\n}\n\nexport default App = connect(\n  (state)=>{\n    return state\n  },\n  (dispatch)=>{\n    return {\n      deselectCharacter:()=>{\n        dispatch({type:\"CHARACTER_SELECT\",payload: {id:null}})\n      },\n      updateCharacter: (data)=>{\n        dispatch({type:\"CHARACTER_UPDATE\",payload: data.formData})\n      }\n    }\n  })(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\nimport logger from 'redux-logger';\nimport { compose, createStore, applyMiddleware } from 'redux'\nimport reducer from './reducers/index'\nimport App from './components/App';\nimport './assets/index.css';\nimport './assets/fonts/icons/style.css'\n\nimport persistState from 'redux-localstorage';\nimport mergePersistedState from 'redux-localstorage/lib/mergePersistedState'\nimport adapter from 'redux-localstorage/lib/adapters/localStorage';\nimport filter from 'redux-localstorage-filter';\n\nimport Locale from './lib/simple-locale'\n\nexport const LOCALSTORAGE_KEY = 'Studios7TV'\nexport const locale = new Locale({ gb_EN: 'gb_EN'});\n\nlocale.load(locale.gb_EN, require('./i18n/gb_EN.json'));\nlocale.set(locale.gb_EN)\n\n\nexport const T=(str=\"\",params={})=>{\n  return locale.get(str,params);\n}\n\nexport const zip=function(arr){\n  return arr.reduce(function(obj, [k, v]){return { ...obj, [k]: v }}, {});\n}\n\nconst storeReducer = compose(\n  mergePersistedState()\n)(reducer);\n\nconst storage = compose(\n  filter('cast','currentCharacter')\n)(adapter(window.localStorage));\n\nconst enhancer = compose(\n  applyMiddleware(logger),\n  persistState(storage, LOCALSTORAGE_KEY)\n);\n\nexport const store = createStore(storeReducer , enhancer);\n\n//export const store = createStore(reducer);\n\nReactDOM.render(\n  <Provider store={store}>\n  <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}